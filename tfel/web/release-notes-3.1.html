<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>New functionalities of the 3.1 version of TFEL, MFront and MTest</title>
        <meta name="author" content="Thomas Helfer" />
            <meta name="date" content="2017-01-01" />
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <style type="text/css">code{white-space: pre;}</style>
            <style type="text/css">
      a.sourceLine { display: inline-block; line-height: 1.25; }
      a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
      a.sourceLine:empty { height: 1.2em; position: absolute; }
      .sourceCode { overflow: visible; }
      code.sourceCode { white-space: pre; position: relative; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      code.sourceCode { white-space: pre-wrap; }
      a.sourceLine { text-indent: -1em; padding-left: 1em; }
      }
      pre.numberSource a.sourceLine
        { position: relative; }
      pre.numberSource a.sourceLine:empty
        { position: absolute; }
      pre.numberSource a.sourceLine::before
        { content: attr(data-line-number);
          position: absolute; left: -5em; text-align: right; vertical-align: baseline;
          border: none; pointer-events: all;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  }
      @media screen {
      a.sourceLine::before { text-decoration: underline; }
      }
      code span.al { color: #ff0000; font-weight: bold; } /* Alert */
      code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #7d9029; } /* Attribute */
      code span.bn { color: #40a070; } /* BaseN */
      code span.bu { } /* BuiltIn */
      code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4070a0; } /* Char */
      code span.cn { color: #880000; } /* Constant */
      code span.co { color: #60a0b0; font-style: italic; } /* Comment */
      code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #ba2121; font-style: italic; } /* Documentation */
      code span.dt { color: #902000; } /* DataType */
      code span.dv { color: #40a070; } /* DecVal */
      code span.er { color: #ff0000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #40a070; } /* Float */
      code span.fu { color: #06287e; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #007020; font-weight: bold; } /* Keyword */
      code span.op { color: #666666; } /* Operator */
      code span.ot { color: #007020; } /* Other */
      code span.pp { color: #bc7a00; } /* Preprocessor */
      code span.sc { color: #4070a0; } /* SpecialChar */
      code span.ss { color: #bb6688; } /* SpecialString */
      code span.st { color: #4070a0; } /* String */
      code span.va { color: #19177c; } /* Variable */
      code span.vs { color: #4070a0; } /* VerbatimString */
      code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>
            <link rel="stylesheet" href=" css/slideshow.css" />
        <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/main.css"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
          </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
        <header>
      <ul id="nav">
	<li><a href="news.html">News</a></li>
	<li><a href="index.html">Overview</a>
	  <ul>
	    <li><a>Domain specific languages</a>
	      <ul>
		<li><a href="material-properties.html">Material properties</a></li>
		<li><a href="behaviours.html">Mechanical behaviours</a></li>
		<li><a href="models.html">Models</a></li>
	      </ul>
            </li>
	    <li><a href="interfaces.html">Interfaces</a></li>
	    <li><a href="mfront-doc.html">mfront-doc</a></li>
	    <li><a href="mtest.html">mtest</a></li>
	    <li><a href="mfm.html">mfm</a></li>
	    <li><a href="mfm-test-generator.html">mfm</a></li>
	  </ul>
	</li>
	<li><a>Getting started</a>
	  <ul>
	    <li><a href="https://sourceforge.net/projects/tfel/files">Download</a></li>
	    <li><a href="release-notes.html">Release notes</a>
	    <ul>
            <li><a>Versions 2.0.x</a>
                <ul>
                <li><a href="release-notes.html">Versions prior to 2.0.5</a><li>
	 	       <li><a href="release-notes-2.0.5.html">Version 2.0.5</a><li>
                </ul>
            </li>
            <li><a>Versions 3.0.x</a>
                <ul>
                    <li><a href="release-notes-3.0.html">Version 3.0.0</a><li>
		           <li><a href="release-notes-3.0.1.html">Version 3.0.1</a><li>
                    <li><a href="release-notes-3.0.2.html">Version 3.0.2</a><li>
		           <li><a href="release-notes-3.0.3.html">Version 3.0.3</a><li>
		           <li><a href="release-notes-3.0.4.html">Version 3.0.4</a><li>
		           <li><a href="release-notes-3.0.5.html">Version 3.0.5</a><li>
                </ul>
           </li>
            <li><a>Versions 3.1.x</a>
                <ul>
		<li><a href="release-notes-3.1.html">Version 3.1.0</a><li>
		<li><a href="release-notes-3.1.1.html">Version 3.1.1</a><li>
		<li><a href="release-notes-3.1.2.html">Version 3.1.2</a><li>
		<li><a href="release-notes-3.1.3.html">Version 3.1.3</a><li>
		<li><a href="release-notes-3.1.4.html">Version 3.1.4</a><li>
		<li><a href="release-notes-3.1.5.html">Version 3.1.5</a><li>
                </ul>
           </li>
            <li><a>Versions 3.2.x</a>
                <ul>
		           <li><a href="release-notes-3.2.html">Version 3.2.0</a><li>
		           <li><a href="release-notes-3.2.1.html">Version 3.2.1</a><li>
                </ul>
           </li>
	      </ul>
	    </li>
	    <li><a href="coverity-scan.html">Coverity scan</a></li>
	    <li><a href="install.html">Installation</a></li>
	  </ul>
	</li>
	<li><a>Documentation</a>
	  <ul>
	    <li><a href="documentations.html">General documentation</a></li>
	    <li><a href="gallery.html">Gallery</a></li>
	    <li><a>Behaviours</a>
	      <ul>
		<li><a href="tutorial.html">Tutorial</a></li>
		<li><a href="implicit-dsl.html">The implicit DSL</a></li>
		<li><a href="benchmark.html">Benchmark</a></li>
		<li><a href="parameters.html">Parameters</a></li>
		<li><a href="BehaviourBricks.html">Behaviour bricks</a></li>
		<li><a href="interfaces.html">Solver interfaces</a>
		  <ul>
		    <li><a href="castem.html">Cast3M</a></li>
		    <li><a href="aster.html">Code-Aster</a></li>
    		    <li><a href="abaqus.html">Abaqus</a></li>
    		    <li><a href="epx.html">EUROPLEXUS</a></li>
		    <li><a href="zmat.html">ZeBuLoN</a></li>
   		    <li><a href="calculix.html">CalculiX</a></li>
		    <!-- <li><a >TMFFT</a></li> -->
		    <li><a href="cyrano.html">Cyrano</a></li>
   		    <li><a href="generic-behaviours-interface.html">Generic Behaviour Interface</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a>TFEL libraries</a>
	      <ul>
		<li><a href="material.html">TFEL/Material</a></li>
	      </ul>
	    </li>
	    <li><a>Python modules</a>
	      <ul>
		<li><a href="tfel-python.html">TFEL modules</a></li>
		<li><a href="mfront-python.html">mfront module</a></li>
		<li><a href="mtest-python.html">mtest module</a></li>
	      </ul>
	    </li>
	    <li><a>MFront keywords</a>
	      <ul>
		<li><a href="DefaultDSL-keywords.html">DefaultDSL</a></li> 
		<li><a href="DefaultCZMDSL-keywords.html">DefaultCZMDSL</a></li> 
		<li><a href="DefaultFiniteStrainDSL-keywords.html">DefaultFiniteStrainDSL</a></li> 
		<li><a href="Implicit-keywords.html">Implicit</a></li> 
		<li><a href="ImplicitFiniteStrain-keywords.html">ImplicitFiniteStrain</a></li> 
		<li><a href="ImplicitII-keywords.html">ImplicitII</a></li> 
		<li><a href="IsotropicMisesCreep-keywords.html">IsotropicMisesCreep</a></li> 
		<li><a href="IsotropicPlasticMisesFlow-keywords.html">IsotropicPlasticMisesFlow</a></li> 
		<li><a href="IsotropicStrainHardeningMisesCreep-keywords.html">IsotropicStrainHardeningMisesCreep</a></li> 
		<li><a href="MaterialLaw-keywords.html">MaterialLaw</a></li> 
		<li><a href="Model-keywords.html">Model</a></li> 
		<li><a href="MultipleIsotropicMisesFlows-keywords.html">MultipleIsotropicMisesFlows</a></li> 
		<li><a href="RungeKutta-keywords.html">RungeKutta</a></li> 
	      </ul>
	    </li>
	    <li><a href="MTest-keywords.html">MTest keywords</a></li>
	    <li><a href="physical-constants.html">Physical constants</a></li>
	    <li><a href="glossary.html">Glossary</a></li>
	    <li><a href="publications.html">Publications</a></li>
	    <li><a href="faq.html">FAQ</a></li>
	    <li><a href="about.html">About</a></li>
	  </ul>
	</li>
	<li><a>Contributing</a>
	  <ul>
	    <li><a href="svn.html">Access to source repositories</a></li>
	    <li><a href="devel.html">Development guidelines</a></li>
	    <li><a href="http://sourceforge.net/p/tfel/tickets">Report bugs</a></li>
	  </ul>
	</li>
	<li><a>Getting Help</a>
	  <ul>
	    <li><a href="search.html">Search on this site</a></li>
	    <li><a href="http://sourceforge.net/p/tfel/discussion">Forum</a></li>
	    <li><a href="http://sourceforge.net/p/tfel/tfel">Mailing lists</a></li>
	    <li><a href="mailto:tfel-contact@cea.fr">Contact</a></li>
	  </ul>
	</li>
      </ul>
    </header>
    <br></br>
        <div id="header">
      <h1 class="title">New functionalities of the 3.1 version of <code>TFEL</code>, <code>MFront</code> and <code>MTest</code></h1>
                  <h2 class="author">Thomas Helfer</h2>
                  <h3 class="date">2017</h3>
          </div>
            <div id="TOC">
      <ul>
      <li><a href="#highlights"><span class="toc-section-number">1</span> Highlights</a><ul>
      <li><a href="#the-gallery-and-the-mfrontgallery-project"><span class="toc-section-number">1.1</span> The gallery and the <code>MFrontGallery</code> project</a></li>
      <li><a href="#support-for-additional-yield-criteria"><span class="toc-section-number">1.2</span> Support for additional yield criteria</a></li>
      <li><a href="#enhanced-numerical-reproducibility-and-stability"><span class="toc-section-number">1.3</span> Enhanced numerical reproducibility and stability</a></li>
      <li><a href="#single-crystal-behaviours-in-mfront"><span class="toc-section-number">1.4</span> Single crystal behaviours in <code>MFront</code></a></li>
      <li><a href="#the-ddif2-brick"><span class="toc-section-number">1.5</span> The <code>DDIF2</code> brick</a></li>
      <li><a href="#the-strainmeasure-keyword"><span class="toc-section-number">1.6</span> The <code>@StrainMeasure</code> keyword</a></li>
      <li><a href="#improved-installation-options"><span class="toc-section-number">1.7</span> Improved installation options</a></li>
      <li><a href="#better-support-of-the-windows-operating-system"><span class="toc-section-number">1.8</span> Better support of the <code>Windows</code> operating system</a></li>
      <li><a href="#new-interfaces"><span class="toc-section-number">1.9</span> New interfaces</a></li>
      <li><a href="#travis-ci-and-appveyor-continous-integration-services"><span class="toc-section-number">1.10</span> <code>Travis CI</code> and <code>Appveyor</code> continous integration services</a></li>
      </ul></li>
      <li><a href="#updates-in-tfel-libraries"><span class="toc-section-number">2</span> Updates in <code>TFEL</code> libraries</a><ul>
      <li><a href="#tfelutilities"><span class="toc-section-number">2.1</span> TFEL/Utilities</a></li>
      <li><a href="#tfelsystem"><span class="toc-section-number">2.2</span> TFEL/System</a></li>
      <li><a href="#tfelmath"><span class="toc-section-number">2.3</span> TFEL/Math</a></li>
      <li><a href="#tfelmaterial"><span class="toc-section-number">2.4</span> <code>TFEL/Material</code></a></li>
      </ul></li>
      <li><a href="#new-functionalities-of-the-mfront-code-generator"><span class="toc-section-number">3</span> New functionalities of the <code>MFront</code> code generator</a><ul>
      <li><a href="#sec:cmake"><span class="toc-section-number">3.1</span> <code>cmake</code> Generator</a></li>
      <li><a href="#implicit-dsl"><span class="toc-section-number">3.2</span> <code>Implicit</code> DSL</a></li>
      <li><a href="#behaviours-interfaces"><span class="toc-section-number">3.3</span> Behaviours interfaces</a></li>
      </ul></li>
      <li><a href="#new-functionalities-of-mtest-solver"><span class="toc-section-number">4</span> New functionalities of <code>MTest</code> solver</a><ul>
      <li><a href="#choice-of-the-rounding-mode-from-the-command-line"><span class="toc-section-number">4.1</span> Choice of the rounding mode from the command line</a></li>
      <li><a href="#abritrary-non-linear-constraints"><span class="toc-section-number">4.2</span> Abritrary non linear constraints</a></li>
      <li><a href="#the-print-and-message-keywords"><span class="toc-section-number">4.3</span> The <code>@Print</code> and <code>@Message</code> keywords</a></li>
      <li><a href="#the-import-keyword"><span class="toc-section-number">4.4</span> The <code>@Import</code> keyword</a></li>
      <li><a href="#python-bindings"><span class="toc-section-number">4.5</span> <code>python</code> bindings</a></li>
      </ul></li>
      <li><a href="#new-functionalities-of-the-mfront-query-tool"><span class="toc-section-number">5</span> New functionalities of the <code>mfront-query</code> tool</a><ul>
      <li><a href="#new-behaviours-queries"><span class="toc-section-number">5.1</span> New behaviours queries</a></li>
      </ul></li>
      <li><a href="#new-functionalities-of-the-tfel-config-tool"><span class="toc-section-number">6</span> New functionalities of the <code>tfel-config</code> tool</a></li>
      <li><a href="#introduction-of-the-mfm-tool"><span class="toc-section-number">7</span> Introduction of the <code>mfm</code> tool</a></li>
      <li><a href="#tickets-fixed"><span class="toc-section-number">8</span> Tickets fixed</a><ul>
      <li><a href="#ticket-37-add-the-ability-to-compute-part-of-the-jacobian-numerically"><span class="toc-section-number">8.1</span> Ticket #37: Add the ability to compute part of the jacobian numerically</a></li>
      <li><a href="#ticket-40-implicitdsl-detect-non-finite-values-during-resolution"><span class="toc-section-number">8.2</span> Ticket #40: <code>ImplicitDSL</code>: Detect non finite values during resolution</a></li>
      <li><a href="#ticket-41-mtest-check-if-the-residual-is-finite-and-not-nan"><span class="toc-section-number">8.3</span> Ticket #41: <code>MTest</code>: check if the residual is finite and not NaN</a></li>
      <li><a href="#ticket-42-check-for-infinite-and-nan-values-in-material-properties"><span class="toc-section-number">8.4</span> Ticket #42: Check for infinite and <code>NaN</code> values in material properties</a></li>
      <li><a href="#ticket-43-add-the-list-of-parameters-names-and-types-to-generated-library-for-the-umat-interface"><span class="toc-section-number">8.5</span> Ticket #43: Add the list of parameters’ names and types to generated library for the <code>UMAT++</code> interface</a></li>
      <li><a href="#ticket-45-support-for-bounds-on-parameters"><span class="toc-section-number">8.6</span> Ticket #45: Support for bounds on parameters</a></li>
      <li><a href="#ticket-46-improvements-to-the-mfront-python-module"><span class="toc-section-number">8.7</span> Ticket #46: Improvements to the <code>mfront</code> <code>python</code> module</a></li>
      <li><a href="#ticket-47-add-python-bindings-for-the-mtestbehaviour-class"><span class="toc-section-number">8.8</span> Ticket #47: Add <code>python</code> bindings for the <code>mtest::Behaviour</code> class</a></li>
      <li><a href="#ticket-46-improved-python-bindings-for-the-mfrontbehaviourdescription-class"><span class="toc-section-number">8.9</span> Ticket #46: Improved <code>python</code> bindings for the <code>mfront::BehaviourDescription</code> class</a></li>
      <li><a href="#ticket-48-add-the-ability-to-retrieve-bounds-for-material-properties-and-parameters-from-the-mtestbehaviour-class"><span class="toc-section-number">8.10</span> Ticket #48: Add the ability to retrieve bounds for material properties and parameters from the <code>mtest::Behaviour</code> class</a></li>
      <li><a href="#ticket-49-add-the-ability-to-retrieve-the-symmetry-of-the-behaviour-and-the-symmetry-of-the-elastic-behaviour-from-mfront-query"><span class="toc-section-number">8.11</span> Ticket #49: Add the ability to retrieve the symmetry of the behaviour and the symmetry of the elastic behaviour from <code>mfront-query</code></a></li>
      <li><a href="#ticket-50-add-the-ability-to-retrieve-bounds-values-from-mfront-query"><span class="toc-section-number">8.12</span> Ticket #50: Add the ability to retrieve bounds values from <code>mfront-query</code></a></li>
      <li><a href="#ticket-55-new-functionnalities-for-multi-yield-surfaces-plasticity"><span class="toc-section-number">8.13</span> Ticket #55: New functionnalities for multi-yield-surfaces plasticity</a></li>
      <li><a href="#ticket-60-compute-the-consistent-tangent-operator-for-the-mieheapellambrechtlogarithmicstrain-finite-strain-strategy"><span class="toc-section-number">8.14</span> Ticket #60: Compute the consistent tangent operator for the <code>MieheApelLambrechtLogarithmicStrain</code> finite strain strategy</a></li>
      <li><a href="#ticket-61-introduce-a-general-finitestrainstrategy-keyword.-deprecate-definition-of-the-finite-strain-strategies-in-the-interfaces."><span class="toc-section-number">8.15</span> Ticket #61: Introduce a general <code>@FiniteStrainStrategy</code> keyword. Deprecate definition of the finite strain strategies in the interfaces.</a></li>
      <li><a href="#ticket-65-elasticmaterialproperties-does-not-work-for-dsl-describing-isotropics-behaviours"><span class="toc-section-number">8.16</span> Ticket #65: <code>@ElasticMaterialProperties</code> does not work for DSL describing isotropics behaviours</a></li>
      <li><a href="#ticket-74-mfront-query-handle-static-variables"><span class="toc-section-number">8.17</span> Ticket 74: <code>mfront-query</code>: handle static variables</a></li>
      <li><a href="#ticket-76-add-python-bindings-for-the-searchpathshandler-class-in-the-mfront-module"><span class="toc-section-number">8.18</span> Ticket 76: Add <code>python</code> bindings for the <code>SearchPathsHandler</code> class in the <code>mfront</code> module</a></li>
      </ul></li>
      <li><a href="#know-regressions"><span class="toc-section-number">9</span> Know regressions</a><ul>
      <li><a href="#stricter-rules-on-variable-declarations"><span class="toc-section-number">9.1</span> Stricter rules on variable declarations</a></li>
      </ul></li>
      <li><a href="#portability"><span class="toc-section-number">10</span> Portability</a><ul>
      <li><a href="#supported-compilers"><span class="toc-section-number">10.1</span> Supported compilers</a></li>
      <li><a href="#benchmarcks"><span class="toc-section-number">10.2</span> Benchmarcks</a></li>
      </ul></li>
      <li><a href="#references"><span class="toc-section-number">11</span> References</a></li>
      </ul>
    </div>
        
<p>The page declares the new functionalities of the 3.1 version of the <code>TFEL</code> project.</p>
<p>The <code>TFEL</code> project is a collaborative development of <a href="http://www.cea.fr/english-portal" title="Commissariat à l&#39;énergie atomique">CEA</a> and <a href="http://www.edf.com/" title="Électricité de France">EDF</a> dedicated to material knowledge manangement with special focus on mechanical behaviours. It provides a set of libraries (including <code>TFEL/Math</code> and <code>TFEL/Material</code>) and several executables, in particular <code>MFront</code> and <code>MTest</code>.</p>
<p><code>TFEL</code> is available on a wide variety of operating systems and compilers.</p>
<h1 id="highlights"><span class="header-section-number">1</span> Highlights</h1>
<h2 id="the-gallery-and-the-mfrontgallery-project"><span class="header-section-number">1.1</span> The gallery and the <code>MFrontGallery</code> project</h2>
<p>The <code>MFront</code> gallery is meant to present well-written implementation of behaviours that will be updated to follow <code>MFront</code> latest evolutions. In each case, the integration algorithm is fully described.</p>
<!-- `MFrontGallery` is a `github` repository where the implementation of -->
<!-- the behaviour described in the gallery can be found. The -->
<p>The <code>MFrontGallery</code> project is a <code>cmake</code> project which builds material libraries for all the codes and/or languages supported by <code>MFront</code> based on the implementation described in the gallery. The purpose of this project is twofold:</p>
<ul>
<li>it delivers ready-to-use shared libraries for a wide variety of phenomena.</li>
<li>it provides an example of how to build a compilation project for <code>MFront</code> files, including lots of useful <code>cmake</code> macros, recipes to build shared libraries and add tests.</li>
</ul>
<p>The <code>MFrontGallery</code> project is available as a <code>github</code> repository: <a href="https://github.com/thelfer/MFrontGallery" class="uri">https://github.com/thelfer/MFrontGallery</a></p>
<h3 id="hyperelastic-behaviours"><span class="header-section-number">1.1.1</span> Hyperelastic behaviours</h3>
<p>The implementation of various hyperelastic behaviours can be found <a href="hyperelasticity.html">here</a>:</p>
<ul>
<li><a href="signorini.html">Signorini</a></li>
<li><a href="ogden.html">Ogden</a></li>
</ul>
<h3 id="hyperviscoelastic-behaviours"><span class="header-section-number">1.1.2</span> Hyperviscoelastic behaviours</h3>
<p>The following page describes how to implement standard hyperviscoelastic behaviours based on the development in Prony series:</p>
<p><a href="http://tfel.sourceforge.net/hyperviscoelasticity.html" class="uri">http://tfel.sourceforge.net/hyperviscoelasticity.html</a></p>
<h3 id="plasticity"><span class="header-section-number">1.1.3</span> Plasticity</h3>
<ul>
<li><a href="gallery/plasticity/IsotropicLinearHardeningPlasticity.mfront">IsotropicLinearHardeningPlasticity</a></li>
<li><a href="gallery/plasticity/IsotropicLinearKinematicHardeningPlasticity.mfront">IsotropicLinearKinematicHardeningPlasticity</a></li>
<li>The implementation of an orthotropic plastic behaviour with isotropic linear hardening is described <a href="orthotropiclinearhardeningplasticity.html">here</a>.</li>
<li>The implementation of a perfect plastic behaviour based on the Hosford equivalent stress is described <a href="hosford.html">here</a>.</li>
<li>The implementation of a perfect plastic behaviour based on the Green yield criterion is described <a href="greenplasticity.html">here</a>.</li>
</ul>
<h3 id="viscoplasticity"><span class="header-section-number">1.1.4</span> Viscoplasticity</h3>
<p>This following article shows how to implement an isotropic viscoplastic behaviour combining isotropic hardening and multiple kinematic hardenings following an Armstrong-Frederic evolution of the back stress:</p>
<p><a href="http://tfel.sourceforge.net/isotropicplasticityamstrongfrederickinematichardening.html" class="uri">http://tfel.sourceforge.net/isotropicplasticityamstrongfrederickinematichardening.html</a></p>
<h2 id="support-for-additional-yield-criteria"><span class="header-section-number">1.2</span> Support for additional yield criteria</h2>
<figure>
<img src="img/HosfordStress.svg" title="Comparison of the Hosford stress (a=100,a=8) and the von Mises stress in plane stress" alt="Comparison of the Hosford stress a=100,a=8 and the von Mises stress in plane stress" style="width:70.0%" /><figcaption>Comparison of the Hosford stress <span class="math inline">\(a=100,a=8\)</span> and the von Mises stress in plane stress</figcaption>
</figure>
<p>The <code>TFEL/Material</code> provides functions to handle advanced yield criteria, such as:</p>
<ul>
<li>the Hosford yield criterion (see <span class="citation" data-cites="hosford_generalized_1972">Hosford (1972)</span>). The associated functions are described in Paragraph  2.4.1.</li>
<li>the Barlat yield criterion (see <span class="citation" data-cites="barlat_linear_2005">Barlat et al. (2005)</span>). The associated functions are described in Paragraph  2.4.2.</li>
</ul>
<p>Following Scherzinger (see <span class="citation" data-cites="scherzinger_return_2017">Scherzinger (2017)</span> for details), special care has been taken to avoid overflow in the evaluation of the yield stress.</p>
<p>Those two yield criteria are based on the eigenvalues and of the stress. The computation of the second derivative, required to build the jacobian of the implicit system, is thus quite involved.</p>
<h2 id="enhanced-numerical-reproducibility-and-stability"><span class="header-section-number">1.3</span> Enhanced numerical reproducibility and stability</h2>
<p>This release has seen lot of work in the overall numerical reproducibility and stability of <code>TFEL</code> algorithms and lead to duplicate most of tests, who are now run using different rounding modes.</p>
<p>Tests based on <code>mtest</code> are run <span class="math inline">\(5\)</span> times, one for each of the four rounding modes defined in the <code>IEEE754</code> norm, plus one time using a specific mode which randomly switches between those modes at various stages of the computations.</p>
<p>Although very crude with respect to advanced approaches such as the <code>CADNA</code> library (see <span class="citation" data-cites="lamotte_cadna_c:_2010">(Lamotte, Chesneaux, and Jézéquel 2010,<span class="citation" data-cites="universite_pierre_et_marie_curie_cadna:_">[@universite_pierre_et_marie_curie_cadna:_]</span>)</span>) or the <code>verrou</code> software, developped by <code>EDF</code> on top of <code>valgrind</code> (see <span class="citation" data-cites="fevotte_verrou:_2016">Févotte and Lathuilière (2016)</span>), those checks, combined with demanding convergence criteria, have proven to be helpful and led to several developments: see for example the section  2.3.1.2 which compares various algorithms to find the eigen vectors of symmetric tensors.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Old versions of the <code>libm</code> library (such as the one package with <code>Debian</code> <code>Wheezy</code> and those found on some exotic systems, such as <code>Haiku</code>), do not support working in other rounding mode than the default one (rounding to the nearest) and can crash (segfaults !).</p>
<p>Disabling changing the rounding mode on those systems can be specified by passing <code>-DTFEL_BROKEN_LIB_MATH=ON</code> to <code>cmake</code>.</p>
</blockquote>
<h3 id="enabling-the--ffast-math-with-gcc-an-clang"><span class="header-section-number">1.3.1</span> Enabling the <code>-ffast-math</code> with <code>GCC</code> an <code>clang</code></h3>
<p>One side effect of the work on the enhanced numerical stability is that the <code>-ffast-math</code> flag of <code>GCC</code> and <code>clang</code> can now be enabled more safely. This significantly improve the performances of the generated code by allowing optimizations that do not preserve strict IEEE compliance. For instance, the overall tests delivered with <code>TFEL</code> runs almost <span class="math inline">\(10\,\%\)</span> faster with this option enabled.</p>
<p>Most of those optimizations are used by default by the <code>Intel</code> compiler.</p>
<p>There are two potential issues with this flags:</p>
<ul>
<li>due to the lack of the strict IEEE compliance, the resulting code can be less portable. This can also lead to less accurate and more unstable code. In <code>TFEL/MFront</code>, it has been seen that the algorithm used to compute the eigenvalues and the eigenvectors of symmetric tensors can be affected. New algorithms, more stable but less efficient, have been introduce, as discussed below.</li>
<li>under <code>GCC</code>, various mathematical functions of the standard library behaves in an unexpected manner and can not be trusted. For example, the <code>isnan</code> function returns <code>true</code>, even if its argument is <code>NaN</code>. This issue has been overcome by implementing proper versions of the <code>fpclassify</code>, <code>isnan</code>, <code>isfinite</code> functions, as described below in paragraph  2.3.3.</li>
</ul>
<p>To build <code>TFEL</code> with the <code>-ffast-math</code>, just pass the <code>-Denable-fast-math=ON</code> option to <code>cmake</code>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Even if <code>TFEL</code> is not built with the <code>-ffast-math</code>, this option can be used to compile <code>MFront</code> files, by specifying the <code>--obuild=level2</code> option to <code>MFront</code>, as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1">$ <span class="ex">mfront</span> --obuild=level2 --interface=....</a></code></pre></div>
</blockquote>
<h2 id="single-crystal-behaviours-in-mfront"><span class="header-section-number">1.4</span> Single crystal behaviours in <code>MFront</code></h2>
<p>Support for writting single crystal behaviours have been greatly improved thanks to the <code>TFELNUMODIS</code> library, which borrows code for the <code>NUMODIS</code> project.</p>
<p>The following new keywords are now available in <code>MFront</code>:</p>
<ul>
<li><code>@CrystalStructure</code>. The following crystal structures are supported:
<ul>
<li><code>Cubic</code>: cubic structure.</li>
<li><code>BCC</code>: body centered cubic structure.</li>
<li><code>FCC</code>: face centered cubic structure.</li>
<li><code>HCP</code>: hexagonal closed-packed structures.</li>
</ul></li>
<li>A single slip systems family can be defined by one of the following synonymous keywords: <code>@SlidingSystem</code>, <code>@GlidingSystem</code> or <code>@SlipSystem</code>. Several slip systems families ca be defined by <code>@SlidingSystems</code>, <code>@GlidingSystems</code> or <code>@SlipSystems</code>.</li>
<li>Two kinds of interaction matrix are supported:
<ul>
<li>The first interaction is defined through the <code>@InteractionMatrix</code> keyword and is meant to describe the effect of dislocations on hardening.</li>
<li>The second interaction is defined through the <code>@DislocationsMeanFreePathInteractionMatrix</code> keyword and is meant to evaluate the effect of all the dislocations on the mean free path of dislocations of a specific system.</li>
</ul></li>
</ul>
<p>Those keywords are fully documented on <a href="singlecrystal.html">this page</a>. As most of the information relative to the slip system and the interaction matrix are automatically generated, the use of the <code>mfront-query</code> tool is strongly advised.</p>
<h2 id="the-ddif2-brick"><span class="header-section-number">1.5</span> The <code>DDIF2</code> brick</h2>
<p><code>DDIF2</code> is the name of a description of damage which formulation is inspired by softening plasticity. This description is the basis of most mechanical behaviour used in CEA’ fuel performance.</p>
<p>The <code>DDIF2</code> brick can be used in place of the <code>StandardElasticity</code> brick. Internally, the <code>DDIF2</code> brick is derived from the <code>StandardElasticity</code> brick, so the definition of the elastic properties follows the same rules.</p>
<h3 id="local-coordinate"><span class="header-section-number">1.5.1</span> Local coordinate</h3>
<p>This description is currently limited to initially isotropic behaviours, but the damage is described in three orthogonal directions. Those directions are currently fixed with respect to the global system. For <span class="math inline">\(2D\)</span> and <span class="math inline">\(3D\)</span> modelling hypotheses, those directions are determined by a material property, which external name is <code>AngularCoordinate</code>, giving the angular coordinate in a cylindrical system.</p>
<h3 id="material-properties-associated-with-damage"><span class="header-section-number">1.5.2</span> Material properties associated with damage</h3>
<p>The description of damage is based on the following material properties:</p>
<ul>
<li>the fracture stresses in each direction. Two options can be used to described them:
<ul>
<li>if the <code>fracture_stress</code> option is used, the fracture stresses are equal in each directions.</li>
<li>otherwise, the <code>fracture_stresses</code> keyword can be used to describe the fracture stresses in each of the three directions.</li>
</ul></li>
<li>the softening slopes stresses in each direction. Two options can be used to described them:
<ul>
<li>if the <code>softening_slope</code> option is used, the softening slopes are equal in each directions.</li>
<li>otherwise, the <code>softening_slopes</code> keyword can be used to describe the softening slopes in each of the three directions.</li>
</ul></li>
</ul>
<p>In each case, a material property must be given as a value or as an external <code>MFront</code> file.</p>
<h4 id="fracture-energies"><span class="header-section-number">1.5.2.1</span> Fracture energies</h4>
<p>Following Hillerborg approach (see <span class="citation" data-cites="hillerborg_analysis_1976">Hillerborg, Modéer, and Perterson (1976)</span>), softening slopes can be related to fracture energies by the mesh size. Thus, rather than the softening slopes, the user can provide the fracture energies through one the <code>fracture_energy</code> or <code>fracture_energies</code> options. In this case, an array of three material properties, which external name is <code>ElementSize</code>, is automatically declared.</p>
<h3 id="external-pressure-effect"><span class="header-section-number">1.5.3</span> External pressure effect</h3>
<p>The effect of external pressure on the crack surface can be taken into account using the option <code>handle_pressure_on_crack_surface</code>. If this option is true, an external state variable called <code>pr</code>, which external name is <code>PressureOnCrackSurface</code>, is automatically declared.</p>
<h3 id="example"><span class="header-section-number">1.5.4</span> Example</h3>
<p>Here is an example of a behaviour based on the <code>DDIF2</code> brick:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="er">@</span>DSL Implicit;</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="er">@</span>Author Thomas Helfer;</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="er">@</span>Date <span class="dv">25</span>/<span class="dv">10</span>/<span class="dv">2017</span>;</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="er">@</span>Behaviour DDIF2_4;</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="er">@</span>Brick DDIF2 {</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"> fracture_stresses : {<span class="fl">150e6</span>,<span class="fl">150e6</span>,<span class="fl">1e11</span>},</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"> softening_slope : <span class="fl">-75e9</span>,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"> handle_pressure_on_crack_surface : <span class="kw">true</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">};</a></code></pre></div>
<p>Here, the fracture stresses are different in each direction. The softening slope is the same in each direction. When a crack is open, the external pressure is applied on the crack surface.</p>
<h2 id="the-strainmeasure-keyword"><span class="header-section-number">1.6</span> The <code>@StrainMeasure</code> keyword</h2>
<p>In previous versions of <code>TFEL</code>, the user would write strain based behaviour. The definition of the strain, and by energetic duality the definition of the stress, were not part of the behaviour.</p>
<p>This is very important for a generic behaviour, which describe a physical phenomenon with no reference to a particular material, but it is not appropriate for a specific behaviour, identified for a specific material, because the definition of the strain is intrinsically part of the behaviour.</p>
<p>Three strain measure are currently supported:</p>
<ul>
<li>the Hencky strain (see <span class="citation" data-cites="miehe_anisotropic_2002">Miehe, Apel, and Lambrecht (2002)</span>).</li>
<li>the Green-Lagrange strain.</li>
<li>the linearised strain.</li>
</ul>
<p>The two first strain measures are suitable for use in finite strain analyses (including finite rotation), whereas the latter is limited to infinitesimal strain analyses (no rotation, small strain).</p>
<p>For the two first strain measures, the definition of the strain is done at a pre-processing stage, before calling the behaviour integration. The interpretation of the dual stress and its conversion to the stress measure expected by the solver is done after the behaviour integration, at a post-processing stage. During this post-processing stage, the consistent tangent operator is also converted to the one expected by the solver.</p>
<p>Those pre- and post-processing stages can be performed:</p>
<ul>
<li>by the calling solver (<code>Code_Aster</code>, <code>ZeBuLoN</code>). In this case, the consistent use of the behaviour was the responsability of the user.</li>
<li>by the <code>MFront</code> interface (<code>Cast3M</code>, <code>Europlexus</code>, <code>CalculiX</code>, etc.). In this case, one has to use one following keywords:
<ul>
<li><code>@CastemFiniteStrainStrategy</code> or <code>@CastemFiniteStrainStrategies</code> for the <code>Cast3M</code> interface. For backward compatibility, those keywords are synonymous of <code>@UmatFiniteStrainStrategy</code> or <code>@UmatFiniteStrainStrategies</code>.</li>
<li><code>@EuroplexusFiniteStrainStrategy</code> (or <code>@EPXFiniteStrainStrategy</code>) for the <code>Europlexus</code> interface.</li>
<li><code>@AbaqusFiniteStrainStrategy</code> for the <code>Abaqus/Standard</code> and <code>Abaqus/Explicit</code> interfaces.
<ul>
<li>etc. For a given behaviour, one may had to use several of those keywords for every interface supported. This was cumbersome.</li>
</ul></li>
</ul></li>
</ul>
<p>Each case was quite error-prone and could lead to an improper usage of the behaviour.</p>
<p>To circumvent this issue, the <code>@StrainMeasure</code> keyword was introduced. This keyword has two distinct effect, depending on the interface:</p>
<ul>
<li>if the pre- and post-processing stages are performed by the solver (<code>Code_Aster</code>), appropriate symbols are defined in the shared library, so that the calling solver can deduce the appropriate strain measure to be used.</li>
<li>otherwise, the the pre- and post-processing stages are handled by the interface.</li>
</ul>
<h2 id="improved-installation-options"><span class="header-section-number">1.7</span> Improved installation options</h2>
<h3 id="appending-the-version-number"><span class="header-section-number">1.7.1</span> Appending the version number</h3>
<p>The <code>TFEL_APPEND_VERSION</code> option will append the version number to the names of:</p>
<ul>
<li>The executables.</li>
<li>The libraries.</li>
<li>The python modules. Note that, to comply with <code>python</code> restriction on module’ names, the characters <code>.</code> and <code>-</code> are replace by <code>_</code> and that only the first level modules are affected.</li>
<li>The directories in the <code>share</code> folder.</li>
</ul>
<p>This allows multiple executables to be installed in the same directory. This option is available since <code>TFEL</code> version <span class="math inline">\(3.0.2\)</span></p>
<h3 id="specifying-a-version-flavour"><span class="header-section-number">1.7.2</span> Specifying a version flavour</h3>
<p>The <code>TFEL_VERSION_FLAVOUR</code> let the user define a string that will be used to modify the names of executables, libraries and so on (see the previous paragraph for details).</p>
<p>For example, using <code>-DTFEL_VERSION_FLAVOUR=dbg</code> at the <code>cmake</code> invocation, will generate an executable called <code>mfront-dbg</code>.</p>
<p>This option can be combined with the <code>TFEL_APPEND_VERSION</code> option.</p>
<h2 id="better-support-of-the-windows-operating-system"><span class="header-section-number">1.8</span> Better support of the <code>Windows</code> operating system</h2>
<p>There are various ways of getting <code>TFEL</code> and <code>MFront</code> working on the the <code>Windows</code> operating system:</p>
<ul>
<li>One may use the <a href="https://www.visualstudio.com/vs/cplusplus"><code>Visual Studio</code></a> IDE and compilers suite. This is the <em>de facto</em> standard on the <code>Windows</code> OS. This is also the compiler used by the <a href="http://www.salome-platform.org/"><code>Salome</code> platform</a>. An installation guide for <code>Visual Studio</code> is available <a href="http://tfel.sourceforge.net/install-windows-VisualStudio.html">here</a>.</li>
<li>One may use the <a href="http://www.mingw.org/"><code>MINGW</code></a>, which is a native <code>Windows</code> port of the <code>GNU Compiler Collection</code> (GCC). This port can be used in the <a href="http://www.mingw.org/wiki/MSYS"><code>MSYS</code></a>) environment. The <code>Windows</code> port of the <code>Cast3M</code> finite element solver is built on the <code>MINGW</code>. An installation guide for <code>TFEL/MFront</code> with <code>Cast3M 2017</code> is available [here][http://tfel.sourceforge.net/install-windows-Cast3M2017.html). In the <code>MSYS</code> environment, the compilation and installation steps are similar to those in <code>Linux</code>. More details can be found <a href="http://tfel.sourceforge.net/install-windows-msys.html">here</a>.</li>
<li>One may compile <code>TFEL/MFront</code> under <a href="https://www.cygwin.com/"><code>Cygwin</code></a>, which provides a large collection of <code>GNU</code> and Open Source tools which provide functionality similar to a <code>Linux</code> distribution on <code>Windows</code> and a substantial <code>POSIX</code> <code>API</code> functionality. Various ports of the <code>CalculiX</code> finite element solver is built upon <code>Cygwin</code></li>
<li>One may compile <code>TFEL/MFront</code> using one of the <code>Linux</code> distribution available with the <a href="https://msdn.microsoft.com/fr-fr/commandline/wsl/about"><code>Windows Subsystem for LinuX</code></a>. This is not officially supported yet, but has been successfully tested by various contributors.</li>
</ul>
<h3 id="visual-studio-support"><span class="header-section-number">1.8.1</span> <code>Visual Studio</code> support</h3>
<p>Support of the <code>Visual Studio</code> has been greatly improved. <code>TFEL</code> versions <code>3.0.x</code> could be compiled and tested with <code>Visual Studio</code> <code>2015</code> and later, but the resulting executables were not really usable by an end user. Indeed, those versions of <code>mfront</code> could not generate a build system compatible with <code>Visual Studio</code>.</p>
<p>For this reason, the <code>cmake</code> generator, described below in section  3.1, has been introduced.</p>
<h2 id="new-interfaces"><span class="header-section-number">1.9</span> New interfaces</h2>
<p>Two new interfaces were introduced in <code>MFront</code>:</p>
<ul>
<li>a native interface for the <code>CalculiX</code> solver. Here native is used to distinguish this interface from the <code>Abaqus/Standard</code> interface which can also be used within <code>CalculiX</code>. This interface can be used with <code>CalculiX</code> 2.13.</li>
<li>an interface for the <code>ANSYS</code> <code>APDL</code> solver. The latter is still experimental.</li>
</ul>
<h2 id="travis-ci-and-appveyor-continous-integration-services"><span class="header-section-number">1.10</span> <code>Travis CI</code> and <code>Appveyor</code> continous integration services</h2>
<p>As an open-source project available on (<code>github</code>](https://github.com/thelfer/tfel), one have free access to the <code>Travis CI</code> and <code>Appveyor</code> continous integration services:</p>
<ul>
<li><code>Travis CI</code> allows us to build <code>TFEL/MFront</code> on various combinations compilers (<code>gcc</code> and <code>clang</code>) and operating systems (<code>Ubuntu</code> and <code>Mac Os</code>).</li>
<li><code>Appveyor</code> allows us to build <code>TFEL/MFront</code> with <code>Visual Studio 2017</code>.</li>
</ul>
<p>Since builds are limited a one hour, one can only test a subset of the <code>TFEL/MFront</code> functionalities.</p>
<h1 id="updates-in-tfel-libraries"><span class="header-section-number">2</span> Updates in <code>TFEL</code> libraries</h1>
<p>The <code>TFEL</code> project provides several libraries. This paragraph is about updates made in those libraries.</p>
<h2 id="tfelutilities"><span class="header-section-number">2.1</span> TFEL/Utilities</h2>
<h3 id="string-algorithms"><span class="header-section-number">2.1.1</span> String algorithms</h3>
<h4 id="the-starts_with-string-algorithm"><span class="header-section-number">2.1.1.1</span> The <code>starts_with</code> string algorithm</h4>
<p>The <code>starts_with</code> string algorithm is an helper function used to determine if a given string starts with another.</p>
<h4 id="the-ends_with-string-algorithm"><span class="header-section-number">2.1.1.2</span> The <code>ends_with</code> string algorithm</h4>
<p>The <code>ends_with</code> string algorithm is an helper function used to determine if a given string ends with another.</p>
<h2 id="tfelsystem"><span class="header-section-number">2.2</span> TFEL/System</h2>
<h4 id="the-libraryinformation-class"><span class="header-section-number">2.2.0.1</span> The <code>LibraryInformation</code> class</h4>
<p>This release introduces the <code>LibraryInformation</code> class that allow querying a library about exported symbols.</p>
<blockquote>
<p><strong>Note</strong> This class has been adapted from the <code>boost/dll</code> library version 1.63 and has been originally written by Antony Polukhin, Renato Tegon Forti and Antony Polukhin.</p>
</blockquote>
<h4 id="improvements-to-the-externallibrarymanager-class"><span class="header-section-number">2.2.0.2</span> Improvements to the <code>ExternalLibraryManager</code> class</h4>
<h5 id="completion-of-libraries-names"><span class="header-section-number">2.2.0.2.1</span> Completion of libraries names</h5>
<p>If a library is not found, the <code>ExternalLibraryManager</code> class will try the following combinaisons:</p>
<ul>
<li>Append <code>lib</code> in front of the library name (except for <code>Microsoft</code> <code>Windows</code> platforms).</li>
<li>Append <code>lib</code> in front of the library name and the standard library suffix at the end (except for <code>Microsoft</code> <code>Windows</code> platforms).</li>
<li>Append the standard library suffix at the end of the library name.</li>
</ul>
<p>The standard library suffix is:</p>
<ul>
<li><code>.dll</code> for <code>Microsoft</code> <code>Windows</code> platforms.</li>
<li><code>.dylib</code> for <code>Apple</code> <code>MacOs</code> plateforms.</li>
<li><code>.so</code> on all other supported systems.</li>
</ul>
<h5 id="retrieving-the-path-of-a-library"><span class="header-section-number">2.2.0.2.2</span> Retrieving the path of a library</h5>
<p>The <code>getLibraryPath</code> method returns the path to a shared library:</p>
<ul>
<li>The method calls the <code>GetModuleFileNameA</code> function on <code>Windows</code> which is reliable.</li>
<li>On <code>Unix</code>, no portable way exists, so the method simply looks if the library can be loaded. If so, the method looks if the file exists locally or in a directory listed in the <code>LD_LIBRARY_PATH</code> variable.</li>
</ul>
<h5 id="better-handling-of-behaviour-parameters"><span class="header-section-number">2.2.0.2.3</span> Better handling of behaviour parameters</h5>
<p>The <code>ExternalLibraryManager</code> class has several new methods for better handling of behaviours’ parameters:</p>
<ul>
<li>The <code>getUMATParametersNames</code> returns the list of parameters.</li>
<li>The <code>getUMATParametersTypes</code> returns a list of integers which gives the type of the associated paramater: The integer values returned have the following meaning:
<ul>
<li>0: floatting point value</li>
<li>1: integer value</li>
<li>2: unsigned short value</li>
</ul></li>
<li>The <code>getRealParameterDefaultValue</code>, <code>getIntegerParameterDefaultValue</code>, and <code>getUnsignedShortParameterDefaultValue</code> methods allow retrieving the default value of a parameter.</li>
</ul>
<h4 id="retrieving-bounds-values"><span class="header-section-number">2.2.0.3</span> Retrieving bounds values</h4>
<p>The <code>ExternalLibraryManager</code> class has several new methods for better handling of a behaviour’ variable bounds:</p>
<ul>
<li>The <code>hasBounds</code>,<code>hasLowerBound</code> and <code>hasUpperBound</code> allow querying about the existence of bounds for a given variable.</li>
<li>The <code>getLowerBound</code> method returns the lower bound a variable, if defined.</li>
<li>The <code>getUpperBound</code> method returns the upper bound a variable, if defined.</li>
</ul>
<h4 id="retrieving-physical-bounds-values"><span class="header-section-number">2.2.0.4</span> Retrieving physical bounds values</h4>
<p>The <code>ExternalLibraryManager</code> class has several new methods for better handling of a behaviour’ variable bounds:</p>
<ul>
<li>The <code>hasPhysicalBounds</code>,<code>hasLowerPhysicalBound</code> and <code>hasUpperPhysicalBound</code> allow querying about the existence of bounds for a given variable.</li>
<li>The <code>getLowerPhysicalBound</code> method returns the physical lower bound a variable, if defined.</li>
<li>The <code>getUpperPhysicalBound</code> method returns the physical upper bound a variable, if defined.</li>
</ul>
<h5 id="retrieving-all-mfront-generated-entry-points-and-associated-information"><span class="header-section-number">2.2.0.4.1</span> Retrieving all mfront generated entry points and associated information</h5>
<p>The <code>getEntryPoints</code> method returns a list containing all mfront generated entry points. Those can be functions or classes depending on the interface’s needs.</p>
<p>The <code>getMaterialKnowledgeType</code> allows retrieving the material knowledge type associated with and entry point. The returned value has the following meaning:</p>
<ul>
<li>0: Material property.</li>
<li>1: Behaviour.</li>
<li>2: Model.</li>
</ul>
<p>The <code>getInterface</code> method allows retrieving the interface of used to generate an entry point. The value returned is defined by <code>MFront</code> following Table  1.</p>
<div id="tbl:MFrontInterfaceName">
<table>
<caption>Table 1: <code>MFront</code> interface name associated to finite element solvers</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Finite element solver</th>
<th style="text-align: center;"><code>MFront</code> interface name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>Cast3M</code></td>
<td style="text-align: center;"><code>Castem</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Code_Aster</code></td>
<td style="text-align: center;"><code>Aster</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Cyrano</code></td>
<td style="text-align: center;"><code>Cyrano</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Europlexus</code></td>
<td style="text-align: center;"><code>Europlexus</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Abaqus/Standard</code></td>
<td style="text-align: center;"><code>Abaqus</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Abaqus/Explicit</code></td>
<td style="text-align: center;"><code>AbaqusExplicit</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Ansys APDL</code></td>
<td style="text-align: center;"><code>Ansys</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>CalculiX</code></td>
<td style="text-align: center;"><code>CalculiX</code></td>
</tr>
</tbody>
</table>
</div>
<p>The following code retrieves all the behaviours generated with the <code>aster</code> interface in the <code>libAsterBehaviour.so</code> library:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">auto</span> ab = <span class="bu">std::</span>vector&lt;<span class="bu">std::</span>string&gt;{};</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="at">const</span> <span class="kw">auto</span> l = <span class="st">&quot;AsterBehaviour&quot;</span>;</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">auto</span>&amp; elm = ExternalLibraryManager::getExternalLibraryManager();</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="cf">for</span>(<span class="at">const</span> <span class="kw">auto</span>&amp; e : elm.getEntryPoints(l)){</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  <span class="cf">if</span>((elm.getMaterialKnowledgeType(l,e)==<span class="dv">1u</span>)&amp;&amp;(elm.getInterface(l,e)==<span class="st">&quot;Aster&quot;</span>)){</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">    ab.push_back(e);</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">}</a></code></pre></div>
<p>Note that we did not mention the prefix and the suffix of the library. The library path is searched through the <code>getLibraryPath</code> method.</p>
<p>The equivalent <code>python</code> code is the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" data-line-number="1">ab  <span class="op">=</span> []</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">l   <span class="op">=</span> <span class="st">&#39;AsterBehaviour&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">elm <span class="op">=</span> ExternalLibraryManager.getExternalLibraryManager()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="cf">for</span> e <span class="kw">in</span> elm.getEntryPoints(l):</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="cf">if</span> ((elm.getMaterialKnowledgeType(l,e)<span class="op">==</span><span class="dv">1</span>) <span class="kw">and</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">        (elm.getInterface(l,e)<span class="op">==</span><span class="st">&#39;Aster&#39;</span>)):</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">        ab.append(e)</a></code></pre></div>
<p>The <code>getMaterial</code> method allows retrieving the material to which an entry point is associated. If no material is defined, this method returns an empty string.</p>
<h3 id="improvements-the-threadpool-class"><span class="header-section-number">2.2.1</span> Improvements the <code>ThreadPool</code> class</h3>
<p>The <code>ThreadPool</code> class is used to handle a pool of threads that are given tasks. This class now has a <code>wait</code> method which blocks the main thread up to tasks completion.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="bu">std::</span>atomic&lt;<span class="dt">int</span>&gt; res(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">auto</span> task = [&amp;res](<span class="at">const</span> <span class="dt">int</span> i){</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="co">// update the res variable</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  <span class="cf">return</span> [&amp;res,i]{</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    res+=i;</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  };</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">};</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">// create a pool of two threads</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">tfel::system::ThreadPool p(<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">// Create two tasks that can be executed</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">// using one or two threads.</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12">p.addTask(task(<span class="dv">-1</span>));</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">p.addTask(task(<span class="dv">2</span>));</a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">// Waiting for the tasks to end</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15">p.wait();</a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">// At this point, res is equal to 1.</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">// The 2 threads in the pool are *not* joined</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">// and are waiting for new tasks.</span></a></code></pre></div>
<h2 id="tfelmath"><span class="header-section-number">2.3</span> TFEL/Math</h2>
<h3 id="symmetric-tensor-eigen-values-and-eigen-vectors"><span class="header-section-number">2.3.1</span> Symmetric tensor eigen values and eigen vectors</h3>
<p>The computation of the eigen values and eigen vectors of a symmetric tensor has been improved in various ways:</p>
<ul>
<li>Various overloaded versions of the <code>computeEigenValues</code>, <code>computeEigenVectors</code> and <code>computeEigenTensors</code> methods have been introduced for more readable usage and compatibility with <em>structured bindings</em> construct introduced in C++17: the results of the computations are returned by value. There is also a new optional parameter allowing to sort the eigen values.</li>
<li>New eigen solvers have been introduced.</li>
</ul>
<h4 id="new-overloaded-versions-of-the-computeeigenvalues-computeeigenvectors-and-computeeigentensors-methods"><span class="header-section-number">2.3.1.1</span> New overloaded versions of the <code>computeEigenValues</code>, <code>computeEigenVectors</code> and <code>computeEigenTensors</code> methods</h4>
<h5 id="return-by-value"><span class="header-section-number">2.3.1.1.1</span> Return by value</h5>
<p>Various overloaded versions of the <code>computeEigenValues</code>, <code>computeEigenVectors</code> and <code>computeEigenTensors</code> methods have been introduced for more readable usage and compatibility with <em>structured bindings</em> construct introduced in C++17: the results of the computations are returned by value.</p>
<p>For example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb6-1" data-line-number="1">tmatrix&lt;<span class="dv">3u</span>,<span class="dv">3u</span>,real&gt; m2;</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">tvector&lt;<span class="dv">3u</span>,real&gt;    vp2;</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="bu">std::</span>tie(vp,m)=s.computeEigenVectors();</a></code></pre></div>
<p>Thanks to C++17 <em>structured bindings</em> construct, the previous code will be equivalent to this much shorter and more readable code:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">auto</span> [vp,m] = s.computeEigenVectors();</a></code></pre></div>
<p>Even better, we could write:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="at">const</span> <span class="kw">auto</span> [vp,m] = s.computeEigenVectors();</a></code></pre></div>
<h5 id="eigen-values-sorting"><span class="header-section-number">2.3.1.1.2</span> Eigen values sorting</h5>
<p>The <code>computeEigenValues</code> and <code>computeEigenVectors</code> methods now have an optional argument which specify if we want the eigen values to be sorted. Three options are available:</p>
<ul>
<li><code>ASCENDING</code>: the eigen values are sorted from the lowest to the greatest.</li>
<li><code>DESCENDING</code>: the eigen values are sorted from the greatest to the lowest.</li>
<li><code>UNSORTED</code>: the eigen values are not sorted.</li>
</ul>
<p>Here is how to use it:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb9-1" data-line-number="1">tmatrix&lt;<span class="dv">3u</span>,<span class="dv">3u</span>,real&gt; m2;</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">tvector&lt;<span class="dv">3u</span>,real&gt;    vp2;</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="bu">std::</span>tie(vp,m)=s.computeEigenVectors(Stensor::ASCENDING);</a></code></pre></div>
<h4 id="sec:eigensolvers"><span class="header-section-number">2.3.1.2</span> New eigen solvers</h4>
<p>The default eigen solver for symmetric tensors used in <code>TFEL</code> is based on analitical computations of the eigen values and eigen vectors. Such computations are more efficient but less accurate than the iterative Jacobi algorithm (see <span class="citation" data-cites="kopp_efficient_2008 kopp_numerical_2017">(Kopp 2008, 2017)</span>).</p>
<p>With the courtesy of Joachim Kopp, we have created a <code>C++11</code> compliant version of his routines that we gathered in header-only library called <code>FSES</code> (Fast Symmetric Eigen Solver). This library is included with <code>TFEL</code> and provides the following algorithms:</p>
<ul>
<li>Jacobi</li>
<li>QL with implicit shifts</li>
<li>Cuppen</li>
<li>Analytical</li>
<li>Hybrid</li>
<li>Householder reduction</li>
</ul>
<p>We have also introduced the Jacobi implementation of the <code>Geometric</code> <code>Tools</code> library (see <span class="citation" data-cites="eberly_robust_2016 eberly_geometric_2017">(Eberly 2016, 2017)</span>).</p>
<p>Those algorithms are available in 3D. For 2D symmetric tensors, we fall back to some default algorithm as described below.</p>
<div id="tbl:eigensolvers">
<table>
<caption>Table 2: List of available eigen solvers.</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Name</th>
<th style="text-align: center;">Algorithm in 3D</th>
<th style="text-align: center;">Algorithm in 2D</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>TFELEIGENSOLVER</code></td>
<td style="text-align: center;">Analytical (TFEL)</td>
<td style="text-align: center;">Analytical (TFEL)</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESJACOBIEIGENSOLVER</code></td>
<td style="text-align: center;">Jacobi</td>
<td style="text-align: center;">Analytical (FSES)</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESQLEIGENSOLVER</code></td>
<td style="text-align: center;">QL with implicit shifts</td>
<td style="text-align: center;">Analytical (FSES)</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESCUPPENEIGENSOLVER</code></td>
<td style="text-align: center;">Cuppen’s Divide &amp; Conquer</td>
<td style="text-align: center;">Analytical (FSES)</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESANALYTICALEIGENSOLVER</code></td>
<td style="text-align: center;">Analytical</td>
<td style="text-align: center;">Analytical (FSES)</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESHYBRIDEIGENSOLVER</code></td>
<td style="text-align: center;">Hybrid</td>
<td style="text-align: center;">Analytical (FSES)</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>GTESYMMETRICQREIGENSOLVER</code></td>
<td style="text-align: center;">Symmetric QR</td>
<td style="text-align: center;">Analytical (TFEL)</td>
</tr>
</tbody>
</table>
</div>
<p>The various eigen solvers available are enumerated in Table  2.</p>
<p>The eigen solver is passed as a template argument of the <code>computeEigenValues</code> or the <code>computeEigenVectors</code> methods as illustrated in the code below:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb10-1" data-line-number="1">tmatrix&lt;<span class="dv">3u</span>,<span class="dv">3u</span>,real&gt; m2;</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">tvector&lt;<span class="dv">3u</span>,real&gt;    vp2;</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="bu">std::</span>tie(vp,m)=s.computeEigenVectors&lt;stensor::GTESYMMETRICQREIGENSOLVER&gt;();</a></code></pre></div>
<div id="tbl:comp_eigensolvers_float">
<table>
<caption>Table 3: Test on <span class="math inline">\(10^{6}\)</span> random symmetric tensors in single precision (<code>float</code>).</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Algorithm</th>
<th style="text-align: center;">Failure ratio</th>
<th style="text-align: center;"><span class="math inline">\(\Delta_{\infty}\)</span></th>
<th style="text-align: center;">Times (ns)</th>
<th style="text-align: center;">Time ratio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>TFELEIGENSOLVER</code></td>
<td style="text-align: center;">0.000642</td>
<td style="text-align: center;">3.29e-05</td>
<td style="text-align: center;">250174564</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>GTESYMMETRICQREIGENSOLVER</code></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1.10e-06</td>
<td style="text-align: center;">359854550</td>
<td style="text-align: center;">1.44</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESJACOBIEIGENSOLVER</code></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">5.62e-07</td>
<td style="text-align: center;">473263841</td>
<td style="text-align: center;">1.89</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESQLEIGENSOLVER</code></td>
<td style="text-align: center;">0.000397</td>
<td style="text-align: center;">1.69e-06</td>
<td style="text-align: center;">259080052</td>
<td style="text-align: center;">1.04</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESCUPPENEIGENSOLVER</code></td>
<td style="text-align: center;">0.019469</td>
<td style="text-align: center;">3.49e-06</td>
<td style="text-align: center;">274547371</td>
<td style="text-align: center;">1.10</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESHYBRIDEIGENSOLVER</code></td>
<td style="text-align: center;">0.076451</td>
<td style="text-align: center;">5.56e-03</td>
<td style="text-align: center;">126689850</td>
<td style="text-align: center;">0.51</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESANALYTICALEIGENSOLVER</code></td>
<td style="text-align: center;">0.108877</td>
<td style="text-align: center;">1.58e-01</td>
<td style="text-align: center;">127236908</td>
<td style="text-align: center;">0.51</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:comp_eigensolvers_double">
<table>
<caption>Table 4: Test on <span class="math inline">\(10^{6}\)</span> random symmetric tensors in double precision (<code>double</code>).</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Algorithm</th>
<th style="text-align: center;">Failure ratio</th>
<th style="text-align: center;"><span class="math inline">\(\Delta_{\infty}\)</span></th>
<th style="text-align: center;">Times (ns)</th>
<th style="text-align: center;">Time ratio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>TFELEIGENSOLVER</code></td>
<td style="text-align: center;">0.000632</td>
<td style="text-align: center;">7.75e-14</td>
<td style="text-align: center;">252663338</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>GTESYMMETRICQREIGENSOLVER</code></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">2.06e-15</td>
<td style="text-align: center;">525845499</td>
<td style="text-align: center;">2.08</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESJACOBIEIGENSOLVER</code></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1.05e-15</td>
<td style="text-align: center;">489507133</td>
<td style="text-align: center;">1.94</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESQLEIGENSOLVER</code></td>
<td style="text-align: center;">0.000422</td>
<td style="text-align: center;">3.30e-15</td>
<td style="text-align: center;">367599140</td>
<td style="text-align: center;">1.45</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESCUPPENEIGENSOLVER</code></td>
<td style="text-align: center;">0.020174</td>
<td style="text-align: center;">5.79e-15</td>
<td style="text-align: center;">374190684</td>
<td style="text-align: center;">1.48</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESHYBRIDEIGENSOLVER</code></td>
<td style="text-align: center;">0.090065</td>
<td style="text-align: center;">3.53e-10</td>
<td style="text-align: center;">154911762</td>
<td style="text-align: center;">0.61</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESANALYTICALEIGENSOLVER</code></td>
<td style="text-align: center;">0.110399</td>
<td style="text-align: center;">1.09e-09</td>
<td style="text-align: center;">157613994</td>
<td style="text-align: center;">0.62</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:comp_eigensolvers_long_double">
<table>
<caption>Table 5: Test on <span class="math inline">\(10^{6}\)</span> random symmetric tensors in extended precision (<code>long double</code>).</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Algorithm</th>
<th style="text-align: center;">Failure ratio</th>
<th style="text-align: center;"><span class="math inline">\(\Delta_{\infty}\)</span></th>
<th style="text-align: center;">Times (ns)</th>
<th style="text-align: center;">Time ratio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>TFELEIGENSOLVER</code></td>
<td style="text-align: center;">0.000575</td>
<td style="text-align: center;">2.06e-17</td>
<td style="text-align: center;">428333721</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>GTESYMMETRICQREIGENSOLVER</code></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1.00e-18</td>
<td style="text-align: center;">814990447</td>
<td style="text-align: center;">1.90</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESJACOBIEIGENSOLVER</code></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">5.11e-19</td>
<td style="text-align: center;">748476926</td>
<td style="text-align: center;">1.75</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESQLEIGENSOLVER</code></td>
<td style="text-align: center;">0.00045</td>
<td style="text-align: center;">1.83e-18</td>
<td style="text-align: center;">548604588</td>
<td style="text-align: center;">1.28</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESCUPPENEIGENSOLVER</code></td>
<td style="text-align: center;">0.009134</td>
<td style="text-align: center;">3.23e-18</td>
<td style="text-align: center;">734707748</td>
<td style="text-align: center;">1.71</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>FSESHYBRIDEIGENSOLVER</code></td>
<td style="text-align: center;">0.99959</td>
<td style="text-align: center;">4.01e-10</td>
<td style="text-align: center;">272701749</td>
<td style="text-align: center;">0.64</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>FSESANALYTICALEIGENSOLVER</code></td>
<td style="text-align: center;">0.999669</td>
<td style="text-align: center;">1.36e-11</td>
<td style="text-align: center;">315243286</td>
<td style="text-align: center;">0.74</td>
</tr>
</tbody>
</table>
</div>
<h4 id="some-benchmarks"><span class="header-section-number">2.3.1.3</span> Some benchmarks</h4>
<p>We have compared the available algorithm on <span class="math inline">\(10^{6}\)</span> random symmetric tensors whose components are in <span class="math inline">\([-1:1]\)</span>.</p>
<p>For a given symmetric tensor, we consider that the computation of the eigenvalues and eigenvectors failed if: <span class="math display">\[
\Delta_{\infty}=\max_{i\in[1,2,3]}\left\|\underline{s}\,\cdot\,\vec{v}_{i}-\lambda_{i}\,\vec{v}_{i}\right\|&gt;10\,\varepsilon
\]</span> where <span class="math inline">\(\varepsilon\)</span> is the accuracy of the floatting point considered.</p>
<p>The results of those tests are reported on Tables  3,  4 and  5:</p>
<ul>
<li>The standard eigen solver available in previous versions of <code>TFEL</code> offers a very interesting compromise between accuracy and numerical efficiency.</li>
<li>If very accurate results are required, the <code>FSESJACOBIEIGENSOLVER</code> eigen solver is a good choice.</li>
</ul>
<h3 id="isotropic-functions-and-isotropic-function-derivatives-of-symmetric-tensors"><span class="header-section-number">2.3.2</span> Isotropic functions and Isotropic function derivatives of symmetric tensors</h3>
<p>Given a scalar valuated function <span class="math inline">\(f\)</span>, one can define an associated isotropic function for symmetric tensors as: <span class="math display">\[
f\left(\underline{s}\right)=\sum_{i=1}^{3}f\left(\lambda_{i}\right)\underline{n}_{i}
\]</span></p>
<p>where <span class="math inline">\(\left.\lambda_{i}\right|_{i\in[1,2,3]}\)</span> are the eigen values of the symmetric tensor <span class="math inline">\(\underline{s}\)</span> and <span class="math inline">\(\left.\underline{n}_{i}\right|_{i\in[1,2,3]}\)</span> the associated eigen tensors.</p>
<p>If <span class="math inline">\(f\)</span> is <span class="math inline">\(\mathcal{C}^{1}\)</span>, then <span class="math inline">\(f\)</span> is a differentiable function of <span class="math inline">\(\underline{s}\)</span>.</p>
<p><span class="math inline">\(f\)</span> can be computed with the <code>computeIsotropicFunction</code> method of the stensor class. <span class="math inline">\(\displaystyle\frac{\displaystyle \partial f}{\displaystyle \partial \underline{s}}\)</span> can be computed with <code>computeIsotropicFunctionDerivative</code>. One can also compute <span class="math inline">\(f\)</span> and <span class="math inline">\(\displaystyle\frac{\displaystyle \partial f}{\displaystyle \partial \underline{s}}\)</span> all at once by the <code>computeIsotropicFunctionAndDerivative</code> method. All those methods are templated by the name of the eigen solver (if no template parameter is given, the <code>TFELEIGENSOLVER</code> is used).</p>
<p>Various new overloaded versions of those methods have been introduced in <code>TFEL-3.1</code>. Those overloaded methods are meant to:</p>
<ul>
<li>allow the user to explicitly give the values of <span class="math inline">\(f\)</span> or <span class="math inline">\(df\)</span>, rather than the functions to compute them. This allows to reduce the computational cost of the evaluation of the isotropic function when the values of the derivatives can directly be computed from the values of <span class="math inline">\(f\)</span>. See the example <span class="math inline">\(\exp\)</span> example below.</li>
<li>return the results by value. This allow a much more readable code if the <em>structured bindings</em> feature of the <code>C++17</code> standard is available.</li>
</ul>
<p>To illustrate this new features, assuming that the <em>structured bindings</em> feature of the <code>C++17</code> standard is available, one can now efficiently evaluate the exponential of a symmetric tensor and its derivative as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="at">const</span> <span class="kw">auto</span> [vp,m] = s.computeEigenVectors();</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="at">const</span> <span class="kw">auto</span> evp    = map([](<span class="at">const</span> <span class="kw">auto</span> x){<span class="cf">return</span> exp(x)},vp);</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="at">const</span> <span class="kw">auto</span> [f,df] = Stensor::computeIsotropicFunctionAndDerivative(evp,evp,vp,m,<span class="dv">1</span>.e<span class="dv">-12</span>);</a></code></pre></div>
<h3 id="sec:isnan"><span class="header-section-number">2.3.3</span> Portable implementation of the <code>fpclassify</code>, <code>isnan</code>, <code>isfinite</code> functions</h3>
<p>The <code>C99</code> standard defines the <code>fpclassify</code>, <code>isnan</code>, <code>isfinite</code> functions to query some information about double precision floatting-point numbers (<code>double</code>):</p>
<ul>
<li>Following the <code>IEEE754</code> standard, the <code>fpclassify</code> categorizes a floating point number into one of the following categories: zero, subnormal, normal, infinite, NaN (Not a Number). The return value returned for each category is respectively <code>FP_ZERO</code>, <code>FP_SUBNORMAL</code>, <code>FP_NORMAL</code>, <code>FP_INFINITE</code> and <code>FP_NaN</code>.</li>
<li>The <code>isnan</code> function returns a boolean stating if its argument has a not-a-number (NaN) value.</li>
<li>The <code>isfinite</code> function returns true if its argument falls into one of the following categories: zero, subnormal or normal.</li>
</ul>
<p>The <code>C++11</code> provides a set of overload for single precision (<code>float</code>) and extended precision (<code>long double</code>) floatting-point numbers.</p>
<p>Those functions are very handy to check the validity of a computation. However, those functions are not compatible with the use of the <code>-ffast-math</code> option of the <code>GNU</code> compiler which also implies the <code>-ffinite-math-only</code> option. This latter option allows optimizations for floating-point arithmetic that assume that arguments and results are finite numbers. As a consequence, when this option is enabled, the previous functions does not behave as expected. For example, <code>isnan</code> always returns false, whatever the value of its argument.</p>
<p>To overcome this issue, we have introduced in <code>TFEL/Math</code> the implementation of these functions provided by the <code>musl</code> library (see <span class="citation" data-cites="musl_libc_2017">Musl development community (2017)</span>). Those implementations are compatible with the <code>-ffast-math</code> option of the <code>GNU</code> compiler. Those implementations are defined in the <code>TFEL/Math/General/IEEE754.hxx</code> header file in the <code>tfel::math::ieee754</code> namespace.</p>
<h2 id="tfelmaterial"><span class="header-section-number">2.4</span> <code>TFEL/Material</code></h2>
<h3 id="sec:hosford"><span class="header-section-number">2.4.1</span> Hosford equivalent stress</h3>
<p>The header <code>TFEL/Material/Hosford.hxx</code> introduces three functions which are meant to compute the Hosford equivalent stress and its first and second derivatives. <em>This header is automatically included by <code>MFront</code></em></p>
<p>The Hosford equivalent stress is defined by: <span class="math display">\[
\sigma_{\mathrm{eq}}^{H}=\sqrt[a]{\displaystyle\frac{\displaystyle 1}{\displaystyle 2}\left({\left|\sigma_{1}-\sigma_{2}\right|}^{a}+{\left|\sigma_{1}-\sigma_{3}\right|}^{a}+{\left|\sigma_{2}-\sigma_{3}\right|}^{a}\right)}
\]</span> where <span class="math inline">\(s_{1}\)</span>, <span class="math inline">\(s_{2}\)</span> and <span class="math inline">\(s_{3}\)</span> are the eigenvalues of the stress.</p>
<p>Therefore, when <span class="math inline">\(a\)</span> goes to infinity, the Hosford stress reduces to the Tresca stress. When <span class="math inline">\(n = 2\)</span> the Hosford stress reduces to the von Mises stress.</p>
<p>The following functions has been implemented:</p>
<ul>
<li><code>computeHosfordStress</code>: return the Hosford equivalent stress</li>
<li><code>computeHosfordStressNormal</code>: return a tuple containing the Hosford equivalent stress and its first derivative (the normal)</li>
<li><code>computeHosfordStressSecondDerivative</code>: return a tuple containing the Hosford equivalent stress, its first derivative (the normal) and the second derivative.</li>
</ul>
<h4 id="example-1"><span class="header-section-number">2.4.1.1</span> Example</h4>
<p>The following example computes the Hosford equivalent stress, its normal and second derivative:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb12-1" data-line-number="1">stress seq;</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">Stensor  n;</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">Stensor4 dn;</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="bu">std::</span>tie(seq,n,dn) = computeHosfordStressSecondDerivative(s,a,seps);</a></code></pre></div>
<p>In this example, <code>s</code> is the stress tensor, <code>a</code> is the Hosford exponent, <code>seps</code> is a numerical parameter used to detect when two eigenvalues are equal.</p>
<p>If <code>C++-17</code> is available, the previous code can be made much more readable:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="at">const</span> <span class="kw">auto</span> [seq,n,dn] = computeHosfordStressSecondDerivative(s,a,seps);</a></code></pre></div>
<h3 id="sec:barlat"><span class="header-section-number">2.4.2</span> Barlat equivalent stress</h3>
<p>The header <code>TFEL/Material/Barlat.hxx</code> introduces various functions which are meant to compute the Barlat equivalent stress and its first and second derivatives. <em>This header is automatically included by <code>MFront</code></em> for orthotropic behaviours.</p>
<p>The Barlat equivalent stress is defined as follows (see <span class="citation" data-cites="barlat_linear_2005">Barlat et al. (2005)</span>): <span class="math display">\[
\sigma_{\mathrm{eq}}^{B}=
\sqrt[a]{
  \frac{1}{4}\left(
  \sum_{i=0}^{3}
  \sum_{j=0}^{3}
  {\left|s&#39;_{i}-s&#39;&#39;_{j}\right|}^{a}
  \right)
}
\]</span></p>
<p>where <span class="math inline">\(s&#39;_{i}\)</span> and <span class="math inline">\(s&#39;&#39;_{i}\)</span> are the eigenvalues of two transformed stresses <span class="math inline">\(\underline{s}&#39;\)</span> and <span class="math inline">\(\underline{s}&#39;&#39;\)</span> by two linear transformation <span class="math inline">\(\underline{\underline{\mathbf{L}}}&#39;\)</span> and <span class="math inline">\(\underline{\underline{\mathbf{L}}}&#39;&#39;\)</span>: <span class="math display">\[
\left\{
\begin{aligned}
\underline{s}&#39;  &amp;= \underline{\underline{\mathbf{L&#39;}}} \,\colon\,\underline{\sigma}\\
\underline{s}&#39;&#39; &amp;= \underline{\underline{\mathbf{L&#39;&#39;}}}\,\colon\,\underline{\sigma}\\
\end{aligned}
\right.
\]</span></p>
<p>The linear transformations <span class="math inline">\(\underline{\underline{\mathbf{L}}}&#39;\)</span> and <span class="math inline">\(\underline{\underline{\mathbf{L}}}&#39;&#39;\)</span> are defined by <span class="math inline">\(9\)</span> coefficients (each) which describe the material orthotropy. There are defined through auxiliary linear transformations <span class="math inline">\(\underline{\underline{\mathbf{C}}}&#39;\)</span> and <span class="math inline">\(\underline{\underline{\mathbf{C}}}&#39;&#39;\)</span> as follows: <span class="math display">\[
\begin{aligned}
\underline{\underline{\mathbf{L}}}&#39; &amp;=\underline{\underline{\mathbf{C}}}&#39;\,\colon\,\underline{\underline{\mathbf{M}}} \\
\underline{\underline{\mathbf{L}}}&#39;&#39;&amp;=\underline{\underline{\mathbf{C}}}&#39;&#39;\,\colon\,\underline{\underline{\mathbf{M}}}
\end{aligned}
\]</span> where <span class="math inline">\(\underline{\underline{\mathbf{M}}}\)</span> is the transformation of the stress to its deviator: <span class="math display">\[
\underline{\underline{\mathbf{M}}}=\underline{\underline{\mathbf{I}}}-\displaystyle\frac{\displaystyle 1}{\displaystyle 3}\underline{I}\,\otimes\,\underline{I}
\]</span></p>
<p>The linear transformations <span class="math inline">\(\underline{\underline{\mathbf{C}}}&#39;\)</span> and <span class="math inline">\(\underline{\underline{\mathbf{C}}}&#39;&#39;\)</span> of the deviator stress are defined as follows: <span class="math display">\[
\underline{\underline{\mathbf{C}}}&#39;=
\displaystyle\frac{\displaystyle 1}{\displaystyle 3}\,
\begin{pmatrix}
0 &amp; -c&#39;_{12} &amp; -c&#39;_{13} &amp; 0 &amp; 0 &amp; 0 \\
-c&#39;_{21} &amp; 0 &amp; -c&#39;_{23} &amp; 0 &amp; 0 &amp; 0 \\
-c&#39;_{31} &amp; -c&#39;_{32} &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; c&#39;_{44} &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 &amp; c&#39;_{55} &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; c&#39;_{66} \\
\end{pmatrix}
\quad
\text{and}
\quad
\underline{\underline{\mathbf{C}}}&#39;&#39;=
\begin{pmatrix}
0 &amp; -c&#39;&#39;_{12} &amp; -c&#39;&#39;_{13} &amp; 0 &amp; 0 &amp; 0 \\
-c&#39;&#39;_{21} &amp; 0 &amp; -c&#39;&#39;_{23} &amp; 0 &amp; 0 &amp; 0 \\
-c&#39;&#39;_{31} &amp; -c&#39;&#39;_{32} &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; c&#39;&#39;_{44} &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 &amp; c&#39;&#39;_{55} &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; c&#39;&#39;_{66} \\
\end{pmatrix}
\]</span></p>
<p>The following functions have been implemented:</p>
<ul>
<li><code>computeBarlatStress</code>: return the Barlat equivalent stress</li>
<li><code>computeBarlatStressNormal</code>: return a tuple containing the Barlat equivalent stress and its first derivative (the normal)</li>
<li><code>computeBarlatStressSecondDerivative</code>: return a tuple containing the Barlat equivalent stress, its first derivative (the normal) and the second derivative.</li>
</ul>
<h4 id="linear-transformations"><span class="header-section-number">2.4.2.1</span> Linear transformations</h4>
<p>To define the linear transformations, the <code>makeBarlatLinearTransformation</code> function has been introduced. This function takes two template parameter:</p>
<ul>
<li>the space dimension (<span class="math inline">\(1\)</span>, <span class="math inline">\(2\)</span>, and <span class="math inline">\(3\)</span>)</li>
<li>the numeric type used (automatically deduced)</li>
</ul>
<p>This functions takes the <span class="math inline">\(9\)</span> coefficients as arguments, as follows:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="at">const</span> <span class="kw">auto</span> l1 = makeBarlatLinearTransformation&lt;<span class="dv">3</span>&gt;(c_12,c_21,c_13,c_31,</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">                                                  c_23,c_32,c_44,c_55,c_66);</a></code></pre></div>
<blockquote>
<p><strong>Note</strong> In his paper, Barlat and coworkers uses the following convention for storing symmetric tensors:</p>
<p><span class="math display">\[
\begin{pmatrix}
xx &amp; yy &amp; zz &amp; yz &amp; zx &amp; xy
\end{pmatrix}
\]</span></p>
<p>which is not consistent with the <code>TFEL</code>/<code>Cast3M</code>/<code>Abaqus</code>/<code>Ansys</code> conventions:</p>
<p><span class="math display">\[
\begin{pmatrix}
xx &amp; yy &amp; zz &amp; xy &amp; xz &amp; yz
\end{pmatrix}
\]</span></p>
<p>Therefore, if one wants to uses coeficients <span class="math inline">\(c^{B}\)</span> given by Barlat, one shall call this function as follows:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="at">const</span> <span class="kw">auto</span> l1 = makeBarlatLinearTransformation&lt;<span class="dv">3</span>&gt;(cB_12,cB_21,cB_13,cB_31,</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">                                                  cB_23,cB_32,cB_66,cBB_55,cBB_44);</a></code></pre></div>
</blockquote>
<p>The <code>TFEL/Material</code> library also provide an overload of the <code>makeBarlatLinearTransformation</code> which template parameters are the modelling hypothesis and the orthotropic axis conventions. The purpose of this overload is to swap appriopriate coefficients to get a consistent definition of the linear transforamtions for all the modelling hypotheses.</p>
<h3 id="the-slipsystemsdescription-class"><span class="header-section-number">2.4.3</span> The <code>SlipSystemsDescription</code> class</h3>
<h1 id="new-functionalities-of-the-mfront-code-generator"><span class="header-section-number">3</span> New functionalities of the <code>MFront</code> code generator</h1>
<h2 id="sec:cmake"><span class="header-section-number">3.1</span> <code>cmake</code> Generator</h2>
<p>For <code>Visual Studio</code> users, who do not have access to the <code>GNU</code> <code>make</code> utility, a <code>cmake</code> generator was introduced.</p>
<p>This generator is the default with <code>Visual Studio</code>. In other development environment, the default generator is the <code>Makefile</code> generator.</p>
<p>One can switch from a generator to another using the <code>--generator</code> (<code>-G</code>) option of <code>mfront</code>, as follows:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" data-line-number="1">$ <span class="ex">mfront</span> -G cmake --obuild --interface=python YoungModulusTest.mfront</a></code></pre></div>
<p>In this case, <code>MFront</code> will perform the following operations:</p>
<ul>
<li>Generate the sources of the python module.</li>
<li>Generate a <code>CMakeLists.txt</code> file in the <code>src</code> directory.</li>
<li>Configure the <code>src</code> directory using <code>cmake</code>.</li>
<li>Build the python module using <code>cmake</code>.</li>
</ul>
<p>The output of the previous command is, on <code>LinuX</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="ex">Treating</span> target : all</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="ex">--</span> The C compiler identification is GNU 4.9.2</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="ex">--</span> The CXX compiler identification is GNU 4.9.2</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="ex">--</span> Check for working C compiler: /usr/bin/cc</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="ex">--</span> Check for working C compiler: /usr/bin/cc -- works</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="ex">--</span> Detecting C compiler ABI info</a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="ex">--</span> Detecting C compiler ABI info - done</a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="ex">--</span> Check for working CXX compiler: /usr/bin/c++</a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="ex">--</span> Check for working CXX compiler: /usr/bin/c++ -- works</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="ex">--</span> Detecting CXX compiler ABI info</a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="ex">--</span> Detecting CXX compiler ABI info - done</a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="ex">--</span> tfel-config         : /home/th202608/codes/tfel/trunk/install/bin/tfel-config</a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="ex">--</span> tfel oflags         : -fvisibility-inlines-hidden<span class="kw">;</span><span class="ex">-fvisibility</span>=hidden<span class="kw">;</span><span class="ex">-fno-fast-math</span><span class="kw">;</span><span class="ex">-DNO_RUNTIME_CHECK_BOUNDS</span><span class="kw">;</span><span class="ex">-O2</span><span class="kw">;</span><span class="ex">-DNDEBUG</span><span class="kw">;</span><span class="ex">-ftree-vectorize</span><span class="kw">;</span><span class="ex">-march</span>=native</a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="ex">--</span> Configuring done</a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="ex">--</span> Generating done</a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="ex">--</span> Build files have been written to: /tmp/src</a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="ex">Scanning</span> dependencies of target materiallaw</a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="bu">[</span> 50%] Building CXX object CMakeFiles/materiallaw.dir/YoungModulusTest-python.o</a>
<a class="sourceLine" id="cb17-19" data-line-number="19">[100%] Building CXX object CMakeFiles/materiallaw.dir/materiallawwrapper.o</a>
<a class="sourceLine" id="cb17-20" data-line-number="20">Linking CXX shared library libmateriallaw.so</a>
<a class="sourceLine" id="cb17-21" data-line-number="21">[100%] Built target materiallaw</a>
<a class="sourceLine" id="cb17-22" data-line-number="22">The following library has been built :</a>
<a class="sourceLine" id="cb17-23" data-line-number="23">- materiallaw.so :  YoungModulusTest</a></code></pre></div>
<h3 id="changing-the-build-system-targeted-used-by-cmake"><span class="header-section-number">3.1.1</span> Changing the build system targeted used by <code>cmake</code></h3>
<p>By default, <code>cmake</code> generates configuration files for a default build system which is determined as follows:</p>
<ul>
<li>if <code>TFEL</code> was built using <code>cmake</code>, the same build system is used.</li>
<li>otherwise, the <code>Unix Makefiles</code> build system is used.</li>
</ul>
<p>This can be changed by the user using the <code>CMAKE_GENERATOR</code> environment variable. For example, one my select the <code>Ninja</code> build system as follows:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" data-line-number="1">$ <span class="va">CMAKE_GENERATOR=</span><span class="st">&quot;Ninja&quot;</span> <span class="ex">mfront</span> --obuild --interface=aster -G cmake Norton.mfront </a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="ex">Treating</span> target : all</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="ex">--</span> The C compiler identification is GNU 4.9.2</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="ex">--</span> The CXX compiler identification is GNU 4.9.2</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="ex">--</span> Check for working C compiler using: Ninja</a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="ex">--</span> Check for working C compiler using: Ninja -- works</a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="ex">--</span> Detecting C compiler ABI info</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="ex">--</span> Detecting C compiler ABI info - done</a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="ex">--</span> Check for working CXX compiler using: Ninja</a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="ex">--</span> Check for working CXX compiler using: Ninja -- works</a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="ex">--</span> Detecting CXX compiler ABI info</a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="ex">--</span> Detecting CXX compiler ABI info - done</a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="ex">--</span> tfel-config         : /home/th202608/codes/tfel/trunk/install-python-3.4/bin/tfel-config</a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="ex">--</span> tfel oflags         : -fvisibility-inlines-hidden<span class="kw">;</span><span class="ex">-fvisibility</span>=hidden<span class="kw">;</span><span class="ex">-fno-fast-math</span><span class="kw">;</span><span class="ex">-DNO_RUNTIME_CHECK_BOUNDS</span><span class="kw">;</span><span class="ex">-O2</span><span class="kw">;</span><span class="ex">-DNDEBUG</span><span class="kw">;</span><span class="ex">-ftree-vectorize</span><span class="kw">;</span><span class="ex">-march</span>=native</a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="ex">--</span> Configuring done</a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="ex">--</span> Generating done</a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="ex">--</span> Build files have been written to: /tmp/src</a>
<a class="sourceLine" id="cb18-18" data-line-number="18">[<span class="ex">3</span>/<span class="ex">3</span>] Linking CXX shared library libAsterBehaviour.so</a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="ex">The</span> following library has been built :</a>
<a class="sourceLine" id="cb18-20" data-line-number="20"><span class="ex">-</span> libAsterBehaviour.so :  asternorton</a></code></pre></div>
<h3 id="environment-variables-affecting-the-build-system-generated-by-cmake"><span class="header-section-number">3.1.2</span> Environment variables affecting the build system generated by <code>cmake</code></h3>
<p>The build system generated by <code>cmake</code> can be affected by various environment variables. For example, with the <code>Ninja</code> and <code>Unix Makefiles</code> build systems, one can select the <code>C++</code> compiler using the <code>CXX</code> environment variable, as follows:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb19-1" data-line-number="1">$ <span class="va">CC=</span>clang <span class="va">CXX=</span>clang++ <span class="va">CMAKE_GENERATOR=</span><span class="st">&quot;Ninja&quot;</span> <span class="ex">mfront</span> --obuild --interface=aster -G cmake Norton.mfront </a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="ex">Treating</span> target : all</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="ex">--</span> The C compiler identification is Clang 3.5.0</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="ex">--</span> The CXX compiler identification is Clang 3.5.0</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="ex">--</span> Check for working C compiler using: Ninja</a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="ex">--</span> Check for working C compiler using: Ninja -- works</a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="ex">--</span> Detecting C compiler ABI info</a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="ex">--</span> Detecting C compiler ABI info - done</a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="ex">--</span> Check for working CXX compiler using: Ninja</a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="ex">--</span> Check for working CXX compiler using: Ninja -- works</a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="ex">--</span> Detecting CXX compiler ABI info</a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="ex">--</span> Detecting CXX compiler ABI info - done</a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="ex">--</span> tfel-config         : /home/th202608/codes/tfel/trunk/install-python-3.4/bin/tfel-config</a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="ex">--</span> tfel oflags         : -fvisibility-inlines-hidden<span class="kw">;</span><span class="ex">-fvisibility</span>=hidden<span class="kw">;</span><span class="ex">-fno-fast-math</span><span class="kw">;</span><span class="ex">-DNO_RUNTIME_CHECK_BOUNDS</span><span class="kw">;</span><span class="ex">-O2</span><span class="kw">;</span><span class="ex">-DNDEBUG</span><span class="kw">;</span><span class="ex">-ftree-vectorize</span><span class="kw">;</span><span class="ex">-march</span>=native</a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="ex">--</span> Configuring done</a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="ex">--</span> Generating done</a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="ex">--</span> Build files have been written to: /tmp/src</a>
<a class="sourceLine" id="cb19-18" data-line-number="18">[<span class="ex">3</span>/<span class="ex">3</span>] Linking CXX shared library libAsterBehaviour.so</a>
<a class="sourceLine" id="cb19-19" data-line-number="19"><span class="ex">The</span> following library has been built :</a>
<a class="sourceLine" id="cb19-20" data-line-number="20"><span class="ex">-</span> libAsterBehaviour.so :  asternorton</a></code></pre></div>
<h2 id="implicit-dsl"><span class="header-section-number">3.2</span> <code>Implicit</code> DSL</h2>
<h3 id="numericallycomputedjacobianblocks"><span class="header-section-number">3.2.1</span> <code>@NumericallyComputedJacobianBlocks</code></h3>
<p>Computing the jacobian of the implicit system is the most difficult part of implementing a behaviour. Computing the jacobian by finite difference is interesting but significantly decreases the performances of the behaviour and can be (very) sensitive to the choice of the numerical perturbation.</p>
<p>The <code>@NumericallyComputedJacobianBlocks</code> keyword is used select a list of jacobian blocks that have to be computed numerically. This is more efficient than computing the whole jacobian numerically. Combined with the ability to compare the jacobian to a numerical approximation, the user now has the ability to build the jacobian incrementally, block by block and checks at each steps that their analytical expressions are correct.</p>
<p>This keyword can optionnaly be followed by a list of modelling hypotheses. The list of jacobian blocks is given as an array.</p>
<h4 id="notes"><span class="header-section-number">3.2.1.1</span> Notes</h4>
<ul>
<li>This keyword can be used multiple times. The newly declared jacobian blocks are added to the existing ones.</li>
</ul>
<h4 id="example-2"><span class="header-section-number">3.2.1.2</span> Example</h4>
<div class="sourceCode" id="NumericallyComputedJacobianBlocks"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="NumericallyComputedJacobianBlocks-1" data-line-number="1"><span class="er">@</span>NumericallyComputedJacobianBlocks {dfp_ddeel,dfeel_ddeel};</a></code></pre></div>
<h2 id="behaviours-interfaces"><span class="header-section-number">3.3</span> Behaviours interfaces</h2>
<h3 id="native-calculix-interface"><span class="header-section-number">3.3.1</span> Native <code>CalculiX</code> interface</h3>
<p>A native interface for the <code>CalculiX</code> solver has been added.</p>
<p>Calling external libraries from <code>CalculiX</code> for the native interface requires a patch in version <code>2.12</code> that can be downloaded <a href="downloads/patchs-CalculiX-2.12.tar.bz2">here</a>.</p>
<h3 id="the-cast3m-interface"><span class="header-section-number">3.3.2</span> The <code>Cast3M</code> interface</h3>
<h4 id="the-mieheapellambrechtlogarithmic-finite-strain-strategy"><span class="header-section-number">3.3.2.1</span> The <code>MieheApelLambrechtLogarithmic</code> finite strain strategy</h4>
<p>The pre- and post-computations performed by the <code>MieheApelLambrechtLogarithmic</code> finite strain strategy , which require the computation of the eigen values and eigen vectors of the right Cauchy strecth tensor, are now based the Jacobi algorithm from the <code>FSES</code> library for improved accuracy.</p>
<h3 id="the-code_aster-interface"><span class="header-section-number">3.3.3</span> The <code>Code_Aster</code> interface</h3>
<h4 id="support-for-the-grot_gdep-finite-strain-formulation"><span class="header-section-number">3.3.3.1</span> Support for the <code>GROT_GDEP</code> finite strain formulation</h4>
<p><code>GROT_GDEP</code> is the name in <code>Code_Aster</code> of a finite strain formulation based on the principle of virtual work in the reference configuration expressed in term of the Green-Lagrange strain and the second Piola-Kirchhoff stress. Such a formulation is also called <code>Total Lagrangian</code> in the litterature (see <span class="citation" data-cites="belytschko_nonlinear_2000">Belytschko (2000)</span>) and in other finite element solvers.</p>
<p>Prior to this version, <code>MFront</code> behaviours were meant to be used with the <code>SIMO_MIEHE</code> finite strain formulation and could not be used with the <code>GROT_GDEP</code> finite strain formulation.</p>
<p>From the behaviour point of view, using <code>SIMO_MIEHE</code> or <code>GROT_GDEP</code> differs from the choice of the output stress and the definition of the consistent tangent operator.</p>
<h4 id="the-asterfinitestrainformulation-keyword"><span class="header-section-number">3.3.3.2</span> The <code>@AsterFiniteStrainFormulation</code> keyword</h4>
<p>The <code>@AsterFiniteStrainFormulation</code> keyword can now be used to choose one of these finite strain formulation.</p>
<p>This keyword must be followed by one of the following choice:</p>
<ul>
<li><code>SIMO_MIEHE</code></li>
<li><code>GROT_GDEP</code> or <code>TotalLagrangian</code></li>
</ul>
<p>The choice <code>SIMO_MIEHE</code> remains the default for backward compatibility.</p>
<h3 id="the-europlexus-interface"><span class="header-section-number">3.3.4</span> The <code>Europlexus</code> interface</h3>
<h4 id="the-mieheapellambrechtlogarithmic-finite-strain-strategy-1"><span class="header-section-number">3.3.4.1</span> The <code>MieheApelLambrechtLogarithmic</code> finite strain strategy</h4>
<p>The pre- and post-computations performed by the <code>MieheApelLambrechtLogarithmic</code> finite strain strategy, which require the computation of the eigen values and eigen vectors of the right Cauchy strecth tensor, are now based the Jacobi algorithm from the <code>FSES</code> library for improved accuracy.</p>
<h3 id="the-abaqus-explicit-interface"><span class="header-section-number">3.3.5</span> The <code>Abaqus-Explicit</code> interface</h3>
<h4 id="the-mieheapellambrechtlogarithmic-finite-strain-strategy-2"><span class="header-section-number">3.3.5.1</span> The <code>MieheApelLambrechtLogarithmic</code> finite strain strategy</h4>
<p>The pre- and post-computations performed by the <code>MieheApelLambrechtLogarithmic</code> finite strain strategy, which require the computation of the eigen values and eigen vectors of the right Cauchy strecth tensor, are now based the Jacobi algorithm from the <code>FSES</code> library for improved accuracy.</p>
<h1 id="new-functionalities-of-mtest-solver"><span class="header-section-number">4</span> New functionalities of <code>MTest</code> solver</h1>
<h2 id="choice-of-the-rounding-mode-from-the-command-line"><span class="header-section-number">4.1</span> Choice of the rounding mode from the command line</h2>
<p><span class="math inline">\(4\)</span> rounding mode are defined in the IEEE754 standard. Changing the rounding mode is a gross way to check the numerical stability of the computations performed with <code>MTest</code> and <code>MFront</code>.</p>
<p>The rounding mode can be set using the <code>--rounding-direction-mode</code> option. Valid values for this option are:</p>
<ul>
<li><code>DownWard</code>: Round downward.</li>
<li><code>ToNearest</code>: Round to nearest (the default).</li>
<li><code>TowardZero</code>: Round toward zero.</li>
<li><code>UpWard</code>: Round upward.</li>
<li><code>Random</code>: rounding mode is changed randomly a various stage of the computation to one of the four previous rounding modes.</li>
</ul>
<p>Most unit-tests based on <code>MTest</code> are now executed five times, one for each available choice of the rounding mode.</p>
<h2 id="abritrary-non-linear-constraints"><span class="header-section-number">4.2</span> Abritrary non linear constraints</h2>
<p>Abritrary non linear constraints on driving variables and thermodynamic forces can now be added using the <code>@NonLinearConstraint</code> keyword.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>This keyword can also be used to define linear constraints, although the numerical treatment of such a constraint will be sub-optimal. A special treatment of such a constraint is planned.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<p>This development of this functionality highlighted the issue reported in Ticket #39. For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/39/" class="uri">https://sourceforge.net/p/tfel/tickets/39/</a></p>
</blockquote>
<h3 id="normalisation-policy"><span class="header-section-number">4.2.1</span> Normalisation policy</h3>
<p>This keyword must be followed by an option giving the normalisation policy. The normalisation policy can have one of the following values:</p>
<ul>
<li><code>DrivingVariable</code>, <code>Strain</code>, <code>DeformationGradient</code>, <code>OpeningDisplacement</code> stating that the constraint is of the order of magnitude of the driving variable.</li>
<li><code>ThermodynamicForce</code>, <code>Stress</code>, <code>CohesiveForce</code> stating that the constraint is of the order of magnitude of the thermodynamic force.</li>
</ul>
<h3 id="examples"><span class="header-section-number">4.2.2</span> Examples</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co">// ensure that the loading is isochoric in 1D</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="er">@</span>NonLinearConstraint&lt;Strain&gt; <span class="ch">&#39;FRR*FTT*FZZ-1&#39;</span>;</a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co">// impose the first piola kirchoff stress</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co">// in an uniaxial compression test</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="er">@</span>Real <span class="ch">&#39;Pi0&#39;</span> <span class="fl">-40e6</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="er">@</span>NonLinearConstraint&lt;Stress&gt; <span class="ch">&#39;SXX*FYY*FZZ-Pi0&#39;</span>;</a></code></pre></div>
<h2 id="the-print-and-message-keywords"><span class="header-section-number">4.3</span> The <code>@Print</code> and <code>@Message</code> keywords</h2>
<p>The <code>@Print</code> keyword, or its alias named <code>@Message</code>, is used to display some informative message on the standard output.</p>
<p>This keyword is followed by floatting point values and/or strings.</p>
<p>Strings are first interpreted as formula. If the interpretation is successfull, the result is printed. Otherwise, the string is display witout interpretation.</p>
<p>All the following tokens are appended to the message up to a final semi-colon.</p>
<h3 id="example-3"><span class="header-section-number">4.3.1</span> Example:</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="er">@</span>Print <span class="st">&quot;Complex computation result: &quot;</span> <span class="st">&quot;12*5&quot;</span>;</a></code></pre></div>
<p>In this example, the first string can’t be interpreted as a formula, so its contents is printed. The second part can be interpreted, so its result (<span class="math inline">\(60\)</span>) is displayed. The message printed is thus:</p>
<pre><code>Complex computation result: 60</code></pre>
<h2 id="the-import-keyword"><span class="header-section-number">4.4</span> The <code>@Import</code> keyword</h2>
<p>Depending of the option used (given between ‘&lt;’ and ‘&gt;’), the <code>@Import</code> keyword is meant to have various meanings.</p>
<p>In this version, the only option available is the <code>castem</code> option.</p>
<h3 id="the-castem-option"><span class="header-section-number">4.4.1</span> The <code>castem</code> option</h3>
<p>The <code>castem</code> (or <code>Castem</code> or <code>Cast3M</code>) option let you import a function generated by <code>MFront</code> with the <code>castem</code> interface. This function can be used in every formula.</p>
<p>The keyword is followed by the library an function names.</p>
<h4 id="example-4"><span class="header-section-number">4.4.1.1</span> Example</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="er">@</span>Import&lt;castem&gt; <span class="ch">&#39;CastemW&#39;</span> <span class="ch">&#39;W_ThermalExpansion&#39;</span>;</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="co">// height at 20°C</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="er">@</span>Real <span class="ch">&#39;h0&#39;</span> <span class="fl">16e-3</span>;</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="co">// height at 1500°C</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="er">@</span>Real <span class="ch">&#39;h&#39;</span> <span class="ch">&#39;h0*(1+W_ThermalExpansion(1723.15)*(1723.25-293.15))&#39;</span>;</a></code></pre></div>
<h2 id="python-bindings"><span class="header-section-number">4.5</span> <code>python</code> bindings</h2>
<h3 id="the-behaviour-class"><span class="header-section-number">4.5.1</span> The <code>Behaviour</code> class</h3>
<p>The <code>Behaviour</code> class has been introduced in the <code>mtest</code> modules. This class can be used to determine at runtime time the material properties, internal state variables, parameters and external state variables required by a specific implementation.</p>
<p>Contrary the <code>tfel.system.ExternalBehaviourDescription</code> class, the information given by the <code>Behaviour</code> class takes into account the variables that are implicitly declared by the interface to match its specific (internal) requirements. For example:</p>
<ul>
<li>The <code>castem</code> interface usually adds additional material properties describing the thermo-elastic properties. Such properties are may be unused by the behaviour.</li>
<li>The <code>abaqus</code> interface may declare additional state variables to describe the orthotropic axes (this is mandatory for finite strain ortotropic behaviours).</li>
<li>etc…</li>
</ul>
<h3 id="the-mtest-class"><span class="header-section-number">4.5.2</span> The <code>MTest</code> class</h3>
<p>In the <code>python</code> bindings, the <code>setNonLinearConstraint</code> method has been added to the <code>MTest</code> class.</p>
<p>This method takes two named arguments:</p>
<ul>
<li><code>constraint</code>, the equation to be satified</li>
<li><code>normalisation_policy</code>. The normalisation policy can have one of the following values:
<ul>
<li><code>DrivingVariable</code>, <code>Strain</code>, <code>DeformationGradient</code>, <code>OpeningDisplacement</code> stating that the constraint is of the order of magnitude of the driving variable</li>
<li><code>ThermodynamicForce</code>, <code>Stress</code>, <code>CohesiveForce</code> stating that the constraint is of the order of magnitude of the thermodynamic force</li>
</ul></li>
</ul>
<h1 id="new-functionalities-of-the-mfront-query-tool"><span class="header-section-number">5</span> New functionalities of the <code>mfront-query</code> tool</h1>
<h2 id="new-behaviours-queries"><span class="header-section-number">5.1</span> New behaviours queries</h2>
<ul>
<li><code>--static-variables</code>: show the list of the behaviour static variables.</li>
<li><code>--parameter-default-value</code>: display a parameter default value.</li>
<li><code>--static-variable-value</code>: display the value of a static variable.</li>
<li><code>--has-bounds</code>: return <code>true</code> if a variable has bounds, <code>false</code> otherwise.</li>
<li><code>--bounds-type</code>: return the bounds type associated to a variable. The returned value has the follwing meaning:
<ul>
<li><code>None</code></li>
<li><code>Lower</code></li>
<li><code>Upper</code></li>
<li><code>LowerAndUpper</code></li>
</ul></li>
<li><code>--bounds-value</code>: show the bounds value associated as a range.</li>
<li><code>--has-physical-bounds</code>: return <code>true</code> if a variable has physical bounds, <code>false</code> otherwise.</li>
<li><code>--physical-bounds-type</code>: return the physical bounds type associated to a variable. The returned value has the follwing meaning:
<ul>
<li><code>None</code></li>
<li><code>Lower</code></li>
<li><code>Upper</code></li>
<li><code>LowerAndUpper</code></li>
</ul></li>
<li><code>--physical-bounds-value</code>: show the bounds value associated as a range.</li>
</ul>
<h3 id="queries-associated-with-the-strain-measure"><span class="header-section-number">5.1.1</span> Queries associated with the strain measure</h3>
<ul>
<li><code>--is-strain-measure-defined</code>: return <code>true</code> if a strain measure has been defined, <code>false</code> otherwise.</li>
<li><code>-strain-measure</code>: return the strain measure on which the behaviour is built. The following values are valid: <code>Linearised</code>, <code>GreenLagrange</code> and <code>Hencky</code>.</li>
</ul>
<h3 id="queries-associated-with-the-crystal-structure"><span class="header-section-number">5.1.2</span> Queries associated with the crystal structure</h3>
<ul>
<li><code>--has-crystal-structure</code>: return <code>true</code> if a crystal structure has been defined.</li>
<li><code>--crystal-structure</code>: return the crystal structure.</li>
<li><code>--slip-systems</code>: list all the slip systems, sorted by family.</li>
<li><code>--slip-systems-by-index</code>: list all the slip systems, sorted by index.</li>
<li><code>--orientation-tensors</code>: list all the orientation tensors, sorted by family“.</li>
<li><code>--orientation-tensors-by-index</code>: list all the orientation tensors.</li>
<li><code>--orientation-tensors-by-slip-system</code>: list all the orientation tensors.</li>
<li><code>--interaction-matrix</code>: display the interaction matrix where the sliding systems’ interaction are represented by their ranks.</li>
<li><code>--interaction-matrix-structure</code>: return the number of independent coefficients and the sliding systems sorted by rank.</li>
</ul>
<h1 id="new-functionalities-of-the-tfel-config-tool"><span class="header-section-number">6</span> New functionalities of the <code>tfel-config</code> tool</h1>
<p><code>tfel-config</code> provides new options for better integration with build systems, such as <code>cmake</code>:</p>
<ul>
<li><code>--major-version</code>: returns the major version of <code>TFEL</code></li>
<li><code>--minor-version</code>: returns the minor version of <code>TFEL</code></li>
<li><code>--revision-version</code>: returns the revision version of <code>TFEL</code></li>
<li><code>--ldflags</code>: returns appropriate flags for the linker to link against specified libraries (see <code>--math</code>, <code>--system</code> the options and others). This option is equivalent to the <code>--libs</code> options but better reflects the intent of the option.</li>
<li><code>--include-path</code>: returns the path the <code>TFEL</code> headers.</li>
<li><code>--library-path</code>: returns the path the <code>TFEL</code> libraries.</li>
<li><code>--library-dependency</code>: returns the list of dependencies of a <code>TFEL</code> library. The given library is included in the list.</li>
<li><code>--python-version</code>: returns the python version used to build the python bindings.</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb25-1" data-line-number="1">$ <span class="ex">tfel-config</span> --library-dependency --material</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="ex">TFELMaterial</span> TFELMath TFELUtilities TFELException TFELNUMODIS</a></code></pre></div>
<h1 id="introduction-of-the-mfm-tool"><span class="header-section-number">7</span> Introduction of the <code>mfm</code> tool</h1>
<p><code>mfm</code> is a tool that allow querying a library about the entry points defined by <code>MFront</code>. Depending on the interface, an entry point can be a class name, a function, a name of an entity that will be registered in an abstract factory when the library is loaded, etc…</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb26-1" data-line-number="1">$ <span class="ex">mfront</span> --obuild --interface=aster ImplicitNorton.mfront </a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="ex">Treating</span> target : all</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="ex">The</span> following library has been built :</a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="ex">-</span> libAsterBehaviour.so :  asterimplicitnorton</a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="ex">th202608@pleiades098</span>:/tmp$ mfm src/libAsterBehaviour.so </a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="ex">-</span> asterimplicitnorton</a></code></pre></div>
<p>The entry points can be filtered. The following filters are available:</p>
<ul>
<li><code>--filter-by-interface</code>.</li>
<li><code>--filter-by-material</code></li>
<li><code>--filter-by-name</code>.</li>
<li><code>--filter-by-type</code>. This option can be followed by <code>material-property</code>, <code>behaviour</code> or <code>model</code></li>
</ul>
<p>Filters are based on case-insensitive regular expressions.</p>
<p>Apart from filters, <code>mfm</code> also have the following options:</p>
<ul>
<li><code>--verbose</code>: set the verbosity level. The following values are accepted: <code>quiet</code>, <code>level0</code>, <code>level1</code>, <code>level2</code>, <code>debug</code>, <code>full</code>. If no value is given, <code>level1</code> is selected.</li>
<li><code>--show-libs</code>: show library name in front of entry points.</li>
</ul>
<p>For example:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb27-1" data-line-number="1">$ <span class="ex">mfm</span> --filter-by-material=<span class="st">&#39;M5&#39;</span> --filter-by-type=material_property --filter-by-name=<span class="st">&#39;.*YoungModulus.*&#39;</span> --filter-by-interface=castem --show-libs  <span class="va">$(</span><span class="fu">find</span> . -type f<span class="va">)</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="ex">-</span> ./lib/libM5MaterialProperties-castem.so: M5_YoungModulus</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="ex">-</span> ./lib/libM5MaterialProperties-castem.so: M5_YoungModulus_Crocodile2015</a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="ex">-</span> ./lib/libM5MaterialProperties-castem.so: M5_YoungModulus_MATPRO2001</a></code></pre></div>
<h1 id="tickets-fixed"><span class="header-section-number">8</span> Tickets fixed</h1>
<p>This release also takes into account the tickets fixed for <code>tfel-3.0.1</code>, <code>tfel-3.0.2</code>, <code>tfel-3.0.3</code>. For a detailed list, see:</p>
<ul>
<li><a href="release-notes-3.0.1.html">the release notes of <code>tfel-3.0.1</code></a></li>
<li><a href="release-notes-3.0.2.html">the release notes of <code>tfel-3.0.2</code></a></li>
<li><a href="release-notes-3.0.3.html">the release notes of <code>tfel-3.0.3</code></a></li>
</ul>
<h2 id="ticket-37-add-the-ability-to-compute-part-of-the-jacobian-numerically"><span class="header-section-number">8.1</span> Ticket #37: Add the ability to compute part of the jacobian numerically</h2>
<p>The <code>@NumericallyComputedJacobianBlocks</code> keyword can be used for that purpose.</p>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/37/" class="uri">https://sourceforge.net/p/tfel/tickets/37/</a></p>
<h2 id="ticket-40-implicitdsl-detect-non-finite-values-during-resolution"><span class="header-section-number">8.2</span> Ticket #40: <code>ImplicitDSL</code>: Detect non finite values during resolution</h2>
<p>During the resolution of the implicit system, invalid results may occur. In previous versions, no check were made leading to a propagation of those values and finally the failure of integration.</p>
<p>A test to check that the residual of the implicit system is finite have been added. If this test is not satisfied after the first iteration, the last increment of the unknowns is divided by two and the resolution is restarted with this guess. If this test is not satisfied at the first iteration, the behaviour integration can not be performed.</p>
<h2 id="ticket-41-mtest-check-if-the-residual-is-finite-and-not-nan"><span class="header-section-number">8.3</span> Ticket #41: <code>MTest</code>: check if the residual is finite and not NaN</h2>
<p>In previous versions, if the behaviour integration returned a not-a-number value (<code>NaN</code> ), this value propagated throughout the computation.</p>
<p>This situation can be detected by checking that the convergence criteria are finite as defined by the <code>IEEE754</code> standard.</p>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/41/" class="uri">https://sourceforge.net/p/tfel/tickets/41/</a></p>
<h2 id="ticket-42-check-for-infinite-and-nan-values-in-material-properties"><span class="header-section-number">8.4</span> Ticket #42: Check for infinite and <code>NaN</code> values in material properties</h2>
<p>In the previous versions of <code>MFront</code>, generated sources for material properties checked that the <code>errno</code> value to determine is something had gone wrong, but this check does not appear to portable nor reliable with the INTEL compiler or when the <code>-ffast-math</code> option of the GNU compiler is activated.</p>
<p>The current version now check that the return value is finite.</p>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/42/" class="uri">https://sourceforge.net/p/tfel/tickets/42/</a></p>
<h2 id="ticket-43-add-the-list-of-parameters-names-and-types-to-generated-library-for-the-umat-interface"><span class="header-section-number">8.5</span> Ticket #43: Add the list of parameters’ names and types to generated library for the <code>UMAT++</code> interface</h2>
<p>In previous versions of <code>MFront</code>, the list of parameters’ names and types were not exported to the generated library for the <code>UMAT++</code> interface, i.e. the additional symbols defined in the generated shared libraries that can be read through the <code>ExternalLibraryManager</code> class.</p>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/43/" class="uri">https://sourceforge.net/p/tfel/tickets/43/</a></p>
<h2 id="ticket-45-support-for-bounds-on-parameters"><span class="header-section-number">8.6</span> Ticket #45: Support for bounds on parameters</h2>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/45/" class="uri">https://sourceforge.net/p/tfel/tickets/45/</a></p>
<h2 id="ticket-46-improvements-to-the-mfront-python-module"><span class="header-section-number">8.7</span> Ticket #46: Improvements to the <code>mfront</code> <code>python</code> module</h2>
<p>The following improvements to the <code>mfront</code> <code>python</code> module have been made:</p>
<ul>
<li>Add missing metods in the <code>BehaviourDescription</code> class to retrieve information about the material symmetry</li>
<li>Add missing methods to retrieve information about standard and physical variables’ bounds.</li>
</ul>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/46/" class="uri">https://sourceforge.net/p/tfel/tickets/46/</a></p>
<h2 id="ticket-47-add-python-bindings-for-the-mtestbehaviour-class"><span class="header-section-number">8.8</span> Ticket #47: Add <code>python</code> bindings for the <code>mtest::Behaviour</code> class</h2>
<p>The <code>mtest</code> module now contains bindings for the <code>mtest::Behaviour</code> class. This class allow querying information about how to use a behaviour in a specific context (interface and modelling hypothesis): for example, if a behaviour has the <code>requireStiffnessTensor</code> attribute, the list of material properties is updated appropriately if required by the interface for the considered modelling hypothesis. The <code>Behaviour</code> class has the following useful methods:</p>
<ul>
<li><code>getBehaviourType</code>: Return the behaviour type.</li>
<li><code>getBehaviourKinematic</code>: Return the behaviour kinematic.</li>
<li><code>getDrivingVariablesSize</code>: Return the size of a vector able to contain all the components of the driving variables.</li>
<li><code>getThermodynamicForcesSize</code>: Return the size of a vector able to contain all the components of the thermodynamic forces.</li>
<li><code>getStensorComponentsSuffixes</code>: Return the components suffixes of a symmetric tensor.</li>
<li><code>getVectorComponentsSuffixes</code>: Return the components suffixes of a vector.</li>
<li><code>getTensorComponentsSuffixes</code>: Return the components suffixes of a tensor.</li>
<li><code>getDrivingVariablesComponents</code>: Return the components of the driving variables.</li>
<li><code>getThermodynamicForcesComponents</code>: Return the components of the thermodynamic forces.</li>
<li><code>getDrivingVariableComponentPosition</code>: Return the position of the component of a driving variable.</li>
<li><code>getThermodynamicForceComponentPosition</code>: Return the position of the component of a thermodynamic force.</li>
<li><code>getSymmetryType</code>: Return the symmetry of the behaviour: – 0 means that the behaviour is isotropic. – 1 means that the behaviour is orthotropic.</li>
<li><code>getMaterialPropertiesNames</code>: return the names of the material properties.</li>
<li><code>getInternalStateVariablesNames</code>: Return the names of the internal state variables.</li>
<li><code>expandInternalStateVariablesNames</code>: Return the names of the internal state variables, taking into account the suffixes for vectors, symmetric tensors and tensors.</li>
<li><code>getInternalStateVariablesSize</code>: Return the the size of the array of internal variables.</li>
<li><code>getInternalStateVariablesDescriptions</code>: Return the descriptions the internal variables.</li>
<li><code>getInternalStateVariableType</code>: Return the type of an internal variable:
<ul>
<li>0 means that the internal state variable is a scalar.</li>
<li>1 means that the internal state variable is a symmetric tensor.</li>
<li>3 means that the internal state variable is a tensor.</li>
</ul></li>
<li><code>getInternalStateVariablePosition</code>: Return the internal state variable position.</li>
<li><code>getExternalStateVariablesNames</code>: Return the names of the external state variables.</li>
<li><code>getParametersNames</code>: Return the names of the floating point parameters.</li>
<li><code>getIntegerParametersNames</code>: Return the names of the integer parameters.</li>
<li><code>getUnsignedShortParametersNames</code>: Return the names of the unsigned short parameters.</li>
<li>The <code>getRealParameterDefaultValue</code>, <code>getIntegerParameterDefaultValue</code> and <code>getUnsignedShortParameterDefaultValue</code> methods can be used to retrieve the default value of a parameter.</li>
<li>The <code>hasBounds</code> method returns true if the given variable has bounds.</li>
<li>The <code>hasLowerBound</code> method returns true if the given variable has a lower bound.</li>
<li>The <code>hasUpperBound</code> method hasUpperBound returns true if the given variable has an upper bound.</li>
<li>The <code>getLowerBound</code> method returns the lower bound of the given variable.</li>
<li>The <code>getUpperBound</code> method returns the uppert bound of the given variable.</li>
<li>The <code>hasPhysicalBounds</code> methodreturns true if the given variable has physical bounds.</li>
<li>The <code>hasLowerPhysicalBound</code> method returns true if the given variable has a physical lower bound.</li>
<li>The <code>hasUpperPhysicalBound</code> method returns true if the given variable has a physical upper bound.</li>
<li>The <code>getLowerPhysicalBound</code> method returns the lower bound of the given variable.</li>
<li>The <code>getUpperPhysicalBound</code> method returns the upper bound of the given variable.</li>
</ul>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/47/" class="uri">https://sourceforge.net/p/tfel/tickets/47/</a></p>
<p>Here is an example of the usage of the <code>Behaviour</code> class in <code>python</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="im">import</span> mtest</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">b<span class="op">=</span> mtest.Behaviour(<span class="st">&#39;AsterBehaviour&#39;</span>,<span class="st">&#39;asternorton&#39;</span>,<span class="st">&#39;Tridimensional&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="cf">for</span> p <span class="kw">in</span> b.getParametersNames():</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">    <span class="bu">print</span>(<span class="st">&#39;- &#39;</span><span class="op">+</span>p<span class="op">+</span><span class="st">&#39;: &#39;</span><span class="op">+</span><span class="bu">str</span>(b.getRealParameterDefaultValue(p)))</a>
<a class="sourceLine" id="cb28-5" data-line-number="5"><span class="cf">for</span> p <span class="kw">in</span> b.getIntegerParametersNames():</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">    <span class="bu">print</span>(<span class="st">&#39;- &#39;</span><span class="op">+</span>p<span class="op">+</span><span class="st">&#39;: &#39;</span><span class="op">+</span><span class="bu">str</span>(b.getIntegerParameterDefaultValue(p)))</a>
<a class="sourceLine" id="cb28-7" data-line-number="7"><span class="cf">for</span> p <span class="kw">in</span> b.getUnsignedShortParametersNames():</a>
<a class="sourceLine" id="cb28-8" data-line-number="8">    <span class="bu">print</span>(<span class="st">&#39;- &#39;</span><span class="op">+</span>p<span class="op">+</span><span class="st">&#39;: &#39;</span><span class="op">+</span><span class="bu">str</span>(b.getUnsignedShortParameterDefaultValue(p)))</a></code></pre></div>
<h2 id="ticket-46-improved-python-bindings-for-the-mfrontbehaviourdescription-class"><span class="header-section-number">8.9</span> Ticket #46: Improved <code>python</code> bindings for the <code>mfront::BehaviourDescription</code> class</h2>
<p>The <code>python</code> bindings of the <code>mfront::BehaviourDescription</code> now gives access to the parameters default values, and information about a variable standard or physical bounds (type, range).</p>
<p>Here is an example of its usage:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="im">from</span> tfel.material <span class="im">import</span> ModellingHypothesis</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="im">import</span> mfront</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"></a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="kw">def</span> printBounds(n,b):</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">    <span class="bu">print</span>(<span class="st">&#39;Bounds of variable </span><span class="ch">\&#39;</span><span class="st">&#39;</span><span class="op">+</span>n<span class="op">+</span><span class="st">&#39;</span><span class="ch">\&#39;</span><span class="st">:&#39;</span>)</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">    <span class="cf">if</span>((b.boundsType<span class="op">==</span>mfront.VariableBoundsTypes.LOWER) <span class="kw">or</span></a>
<a class="sourceLine" id="cb29-7" data-line-number="7">       (b.boundsType<span class="op">==</span>mfront.VariableBoundsTypes.LOWERANDUPPER)):</a>
<a class="sourceLine" id="cb29-8" data-line-number="8">        <span class="bu">print</span>(<span class="st">&#39;- lower bound: &#39;</span><span class="op">+</span><span class="bu">str</span>(b.lowerBound))</a>
<a class="sourceLine" id="cb29-9" data-line-number="9">    <span class="cf">if</span>((b.boundsType<span class="op">==</span>mfront.VariableBoundsTypes.UPPER) <span class="kw">or</span></a>
<a class="sourceLine" id="cb29-10" data-line-number="10">       (b.boundsType<span class="op">==</span>mfront.VariableBoundsTypes.LOWERANDUPPER)):</a>
<a class="sourceLine" id="cb29-11" data-line-number="11">        <span class="bu">print</span>(<span class="st">&#39;- upper bound: &#39;</span><span class="op">+</span><span class="bu">str</span>(b.upperBound))</a>
<a class="sourceLine" id="cb29-12" data-line-number="12">        <span class="bu">print</span>(<span class="st">&#39;&#39;</span>)</a>
<a class="sourceLine" id="cb29-13" data-line-number="13"></a>
<a class="sourceLine" id="cb29-14" data-line-number="14">dsl <span class="op">=</span> mfront.getDSL(<span class="st">&#39;Norton.mfront&#39;</span>)</a>
<a class="sourceLine" id="cb29-15" data-line-number="15">dsl.analyseFile(<span class="st">&#39;Norton.mfront&#39;</span>,[])</a>
<a class="sourceLine" id="cb29-16" data-line-number="16"></a>
<a class="sourceLine" id="cb29-17" data-line-number="17"><span class="co"># behaviour description</span></a>
<a class="sourceLine" id="cb29-18" data-line-number="18">bd <span class="op">=</span> dsl.getBehaviourDescription()</a>
<a class="sourceLine" id="cb29-19" data-line-number="19"></a>
<a class="sourceLine" id="cb29-20" data-line-number="20"><span class="cf">if</span>(bd.getSymmetryType()<span class="op">==</span>mfront.BehaviourSymmetryType.ISOTROPIC):</a>
<a class="sourceLine" id="cb29-21" data-line-number="21">    <span class="bu">print</span> <span class="st">&#39;Isotropic behaviour</span><span class="ch">\n</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb29-22" data-line-number="22"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb29-23" data-line-number="23">    <span class="bu">print</span> <span class="st">&#39;Orthropic behaviour</span><span class="ch">\n</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb29-24" data-line-number="24"></a>
<a class="sourceLine" id="cb29-25" data-line-number="25"><span class="cf">if</span>(bd.getElasticSymmetryType()<span class="op">==</span>mfront.BehaviourSymmetryType.ISOTROPIC):</a>
<a class="sourceLine" id="cb29-26" data-line-number="26">    <span class="bu">print</span> <span class="st">&#39;Isotropic elasticity</span><span class="ch">\n</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb29-27" data-line-number="27"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb29-28" data-line-number="28">    <span class="bu">print</span> <span class="st">&#39;Orthropic elasticity</span><span class="ch">\n</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb29-29" data-line-number="29"></a>
<a class="sourceLine" id="cb29-30" data-line-number="30"><span class="co"># a deeper look at the 3D case</span></a>
<a class="sourceLine" id="cb29-31" data-line-number="31">d <span class="op">=</span> bd.getBehaviourData(ModellingHypothesis.TRIDIMENSIONAL)</a>
<a class="sourceLine" id="cb29-32" data-line-number="32"><span class="cf">for</span> p <span class="kw">in</span> d.getParameters():</a>
<a class="sourceLine" id="cb29-33" data-line-number="33">    <span class="cf">if</span>(p.arraySize<span class="op">==</span><span class="dv">1</span>):</a>
<a class="sourceLine" id="cb29-34" data-line-number="34">        <span class="cf">if</span>(p.hasBounds()):</a>
<a class="sourceLine" id="cb29-35" data-line-number="35">            printBounds(p.name,p.getBounds())</a>
<a class="sourceLine" id="cb29-36" data-line-number="36">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb29-37" data-line-number="37">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(p.arraySize):</a>
<a class="sourceLine" id="cb29-38" data-line-number="38">            <span class="cf">if</span>(p.hasBounds(i)):</a>
<a class="sourceLine" id="cb29-39" data-line-number="39">                printBounds(p.name<span class="op">+</span><span class="st">&#39;[&#39;</span><span class="op">+</span><span class="bu">str</span>(i)<span class="op">+</span><span class="st">&#39;]&#39;</span>,p.getBounds(i))</a></code></pre></div>
<h2 id="ticket-48-add-the-ability-to-retrieve-bounds-for-material-properties-and-parameters-from-the-mtestbehaviour-class"><span class="header-section-number">8.10</span> Ticket #48: Add the ability to retrieve bounds for material properties and parameters from the <code>mtest::Behaviour</code> class</h2>
<p>The following methods were added to the <code>mtest.Behaviour</code> class: - The <code>hasBounds</code> method returns true if the given variable has bounds. - The <code>hasLowerBound</code> method returns true if the given variable has a lower bound. - The <code>hasUpperBound</code> method hasUpperBound returns true if the given variable has an upper bound. - The <code>getLowerBound</code> method returns the lower bound of the given variable. - The <code>getUpperBound</code> method returns the uppert bound of the given variable. - The <code>hasPhysicalBounds</code> methodreturns true if the given variable has physical bounds. - The <code>hasLowerPhysicalBound</code> method returns true if the given variable has a physical lower bound. - The <code>hasUpperPhysicalBound</code> method returns true if the given variable has a physical upper bound. - The <code>getLowerPhysicalBound</code> method returns the lower bound of the given variable. - The <code>getUpperPhysicalBound</code> method returns the upper bound of the given variable.</p>
<p>Here is an example:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="im">from</span> mtest <span class="im">import</span> Behaviour</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"></a>
<a class="sourceLine" id="cb30-3" data-line-number="3">b <span class="op">=</span> Behaviour(<span class="st">&#39;AsterBehaviour&#39;</span>,<span class="st">&#39;asternorton&#39;</span>,<span class="st">&#39;Tridimensional&#39;</span>)</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"></a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="cf">for</span> p <span class="kw">in</span> b.getParametersNames():</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">    <span class="cf">if</span> b.hasLowerBound(p):</a>
<a class="sourceLine" id="cb30-7" data-line-number="7">        <span class="bu">print</span>(p<span class="op">+</span><span class="st">&quot; lower bound: &quot;</span><span class="op">+</span><span class="bu">str</span>(b.getLowerBound(p)))</a>
<a class="sourceLine" id="cb30-8" data-line-number="8">    <span class="cf">if</span> b.hasUpperBound(p):</a>
<a class="sourceLine" id="cb30-9" data-line-number="9">        <span class="bu">print</span>(p<span class="op">+</span><span class="st">&quot; lower bound: &quot;</span><span class="op">+</span><span class="bu">str</span>(b.getUpperBound(p)))</a></code></pre></div>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/48/" class="uri">https://sourceforge.net/p/tfel/tickets/48/</a></p>
<h2 id="ticket-49-add-the-ability-to-retrieve-the-symmetry-of-the-behaviour-and-the-symmetry-of-the-elastic-behaviour-from-mfront-query"><span class="header-section-number">8.11</span> Ticket #49: Add the ability to retrieve the symmetry of the behaviour and the symmetry of the elastic behaviour from <code>mfront-query</code></h2>
<p>The following queries are now available:</p>
<ul>
<li><code>--elastic-symmetry</code>: return the symmetry of the elastic part of the behaviour. If the returned value is 0, this part of the behaviour is isotropic. If the returned value is 1, this part of the behaviour is orthotropic.the behaviour is orthotropic.</li>
<li><code>--symmetry</code>: return the behaviour symmetry. If the returned value is 0, the behaviour is isotropic. If the returned value is 1, the behaviour is orthotropic.</li>
</ul>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/49/" class="uri">https://sourceforge.net/p/tfel/tickets/49/</a></p>
<h2 id="ticket-50-add-the-ability-to-retrieve-bounds-values-from-mfront-query"><span class="header-section-number">8.12</span> Ticket #50: Add the ability to retrieve bounds values from <code>mfront-query</code></h2>
<p>The following queries are now available:</p>
<ul>
<li><code>--has-bounds</code>: return <code>true</code> if a variable has bounds, <code>false</code> otherwise.</li>
<li><code>--bounds-type</code>: return the bounds type associated to a variable.</li>
<li><code>--bounds-value</code>: show the bounds value associated as a range.</li>
<li><code>--has-physical-bounds</code>: return <code>true</code> if a variable has physical bounds, <code>false</code> otherwise.</li>
<li><code>--physical-bounds-type</code>: return the physical bounds type associated to a variable.</li>
<li><code>--physical-bounds-value</code>: show the bounds value associated as a range.</li>
</ul>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/50/" class="uri">https://sourceforge.net/p/tfel/tickets/50/</a></p>
<h2 id="ticket-55-new-functionnalities-for-multi-yield-surfaces-plasticity"><span class="header-section-number">8.13</span> Ticket #55: New functionnalities for multi-yield-surfaces plasticity</h2>
<p>The <code>@AdditionalConvergenceChecks</code> keyword is meant to introduce a code block returning stating if convergence has been reached. More precisely, this code block is meant to modify a boolean variable called <code>converged</code>. This boolean is <code>true</code> if the standard convergence criterion has been reached, <code>false</code> otherwise.</p>
<p>One possible usage of this code block is multi-surfaces’ plasticity treated by activating or desactivating statuses.</p>
<h3 id="example-5"><span class="header-section-number">8.13.1</span> Example</h3>
<p>Consider a two surfaces plastic behaviour. To handle it, we will need two arrays of boolean:</p>
<ul>
<li>the first one tells if the ith surface is activable during the time step.</li>
<li>the second one gives the current status of the ith surface: if the corresponding status is set to <code>true</code>, this surface is active.</li>
</ul>
<pre><code>@Brick StandardElasticity; // to have computeElasticPrediction

@LocalVariable bool status[2];

@Prediction{
  // initial status based of the elastic prediction
  auto sigel = computeElasticPrediction();
  for(unsigned short i=0;i!=2;++i){
    status[i] = ...
  }
} // end of @Prediction

@Integrator{
  for(unsigned short i=0;i!=2;++i){
    if(status[i]){
      ...
    }
  }
} // end of @Integrator

@AdditionalConvergenceChecks{
  // initial status based of the elastic prediction
  for(unsigned short i=0;i!=2;++i){
    // change the status if needed. If a status a changed,
    //set `converged` to `false`
    ...
  }
}</code></pre>
<h2 id="ticket-60-compute-the-consistent-tangent-operator-for-the-mieheapellambrechtlogarithmicstrain-finite-strain-strategy"><span class="header-section-number">8.14</span> Ticket #60: Compute the consistent tangent operator for the <code>MieheApelLambrechtLogarithmicStrain</code> finite strain strategy</h2>
<p>The <code>LogarithmicStrainHandler</code> class has been introduced to gather the implementations of <code>MieheApelLambrechtLogarithmicStrain</code> finite strain strategy in all interfaces. The computation of the consistent tangent operator has been implemented in this class.</p>
<p>This feature is available in the <code>Cast3M</code>, <code>Abaqus/Standard</code> and <code>CalculiX</code> interfaces.</p>
<h2 id="ticket-61-introduce-a-general-finitestrainstrategy-keyword.-deprecate-definition-of-the-finite-strain-strategies-in-the-interfaces."><span class="header-section-number">8.15</span> Ticket #61: Introduce a general <code>@FiniteStrainStrategy</code> keyword. Deprecate definition of the finite strain strategies in the interfaces.</h2>
<p>The <code>StrainMeasure</code> keyword has been introduced. This keyword is followed by the name of a strain measure:</p>
<ul>
<li><code>Linearised</code> (small strain behaviour)</li>
<li><code>Green-Lagrange</code></li>
<li><code>Hencky</code></li>
</ul>
<p>The stress tensor computed by the behaviour is interpreted as the dual of the strain measure chosen.</p>
<p>The definition of the finite strain strategies in interfaces has not been deprecated, as this allows to define general purpose behaviours available in various “flavours”.</p>
<p>The <code>StrainMeasure</code> keyword has been introduced. This keyword is followed by the name of a strain measure:</p>
<ul>
<li><code>Linearised</code> (small strain behaviour)</li>
<li><code>Green-Lagrange</code></li>
<li><code>Hencky</code></li>
</ul>
<p>The stress tensor computed by the behaviour is interpreted as the dual of the strain measure chosen.</p>
<p>The definition of the finite strain strategies in interfaces has not been deprecated, as this allows to define general purpose behaviours available in various “flavours”.</p>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/61/" class="uri">https://sourceforge.net/p/tfel/tickets/61/</a></p>
<h2 id="ticket-65-elasticmaterialproperties-does-not-work-for-dsl-describing-isotropics-behaviours"><span class="header-section-number">8.16</span> Ticket #65: <code>@ElasticMaterialProperties</code> does not work for DSL describing isotropics behaviours</h2>
<p>The <code>@ElasticMaterialProperties</code> is now available for domain specific languages (DSL) describing isotropics behaviours.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="er">@</span>DSL IsotropicStrainHardeningMisesCreep;</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="er">@</span>Behaviour StrainHardeningCreep2;</a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="er">@</span>Author    Helfer Thomas;</a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="er">@</span>Date      <span class="dv">23</span>/<span class="dv">11</span>/<span class="bn">06</span>;</a>
<a class="sourceLine" id="cb32-5" data-line-number="5"></a>
<a class="sourceLine" id="cb32-6" data-line-number="6"><span class="er">@</span>ElasticMaterialProperties {<span class="st">&quot;Inconel600_YoungModulus.mfront&quot;</span>,<span class="fl">0.3</span>};</a>
<a class="sourceLine" id="cb32-7" data-line-number="7"></a>
<a class="sourceLine" id="cb32-8" data-line-number="8"><span class="er">@</span>MaterialProperty real A;</a>
<a class="sourceLine" id="cb32-9" data-line-number="9"><span class="er">@</span>MaterialProperty real Ns;</a>
<a class="sourceLine" id="cb32-10" data-line-number="10"><span class="er">@</span>MaterialProperty real Np;</a>
<a class="sourceLine" id="cb32-11" data-line-number="11"></a>
<a class="sourceLine" id="cb32-12" data-line-number="12"><span class="er">@</span>FlowRule{</a>
<a class="sourceLine" id="cb32-13" data-line-number="13">  <span class="at">const</span> real p0  = <span class="dv">1</span>.e<span class="dv">-6</span>;</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">  <span class="at">const</span> real tmp = A*pow(seq,Ns<span class="fl">-1.</span>)*pow(p+p0,-Np<span class="dv">-1</span>);</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">  f       = tmp*seq*(p+p0);</a>
<a class="sourceLine" id="cb32-16" data-line-number="16">  df_dseq =  Ns*tmp*(p+p0);</a>
<a class="sourceLine" id="cb32-17" data-line-number="17">  df_dp   = -Np*tmp*seq;</a>
<a class="sourceLine" id="cb32-18" data-line-number="18">}</a></code></pre></div>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/65/" class="uri">https://sourceforge.net/p/tfel/tickets/65/</a></p>
<h2 id="ticket-74-mfront-query-handle-static-variables"><span class="header-section-number">8.17</span> Ticket 74: <code>mfront-query</code>: handle static variables</h2>
<p><code>mfront-query</code> now has the following options:</p>
<ul>
<li><code>--static-variables</code>: list all the static variables</li>
<li><code>--static-variable-value</code>: return the value of a given static variable</li>
</ul>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/74/" class="uri">https://sourceforge.net/p/tfel/tickets/74/</a></p>
<h2 id="ticket-76-add-python-bindings-for-the-searchpathshandler-class-in-the-mfront-module"><span class="header-section-number">8.18</span> Ticket 76: Add <code>python</code> bindings for the <code>SearchPathsHandler</code> class in the <code>mfront</code> module</h2>
<p>The <code>SearchPathsHandler</code> class is used in <code>MFront</code> to search additional files. Bindings for this class has been added to the <code>mfront</code> module. The following methods are available:</p>
<ul>
<li><code>addSearchPaths</code>: Add new search paths. Multiple paths are separated by commas under unices systems and by semicolons under Windows systems.</li>
<li><code>search</code>: search a file and return the path to it if found.</li>
<li><code>getSearchPaths</code>: return all the registred search paths.</li>
</ul>
<p>For more details, see: <a href="https://sourceforge.net/p/tfel/tickets/76/" class="uri">https://sourceforge.net/p/tfel/tickets/76/</a></p>
<h1 id="know-regressions"><span class="header-section-number">9</span> Know regressions</h1>
<h2 id="stricter-rules-on-variable-declarations"><span class="header-section-number">9.1</span> Stricter rules on variable declarations</h2>
<p>All variables, to the very exception of local variables, must be declared before the first user defined code block to allow appropriate analysis of those code blocks.</p>
<p>Some variables are automatically declared by keywords. For instance, the <code>@Epsilon</code> keyword defines implicitly a parameter named <code>epsilon</code>.</p>
<p>In previous versions of <code>MFront</code>, those rules were only partially enforced: it may happen that some keywords or variable declaration shall now be moved before the first user defined code block.</p>
<h1 id="portability"><span class="header-section-number">10</span> Portability</h1>
<div id="slideshow">
<p><ul class="slides"> <li><img src="img/TFEL-3.1/Fedora_27_05_12_2017_11_37_17.png" width="620" height="320" alt="Fedora 27 gcc 7.2.1"/></li> <li><img src="img/TFEL-3.1/Ghost_BSD-10.3.png" width="620" height="320" alt="Ghost BSD 10.3 clang 3.4.1"/></li> <li><img src="img/TFEL-3.1/TrueOs-07-2017_05_12_2017_08_01_39.png" width="620" height="320" alt="TrueOs 2017 clang-4.0"/></li> <li><img src="img/TFEL-3.1/Alpine_Linux_3.6.png" width="620" height="320" alt="Alpine Linux 3.6 MUSL C library gcc 6.3"/></li> <li><img src="img/TFEL-3.1/VisualStudio-2015.png" width="620" height="320" alt="Visual Studio 2015"/></li> <li><img src="img/TFEL-3.1/Cygwin.png" width="620" height="320" alt="Cygwin gcc 5.4"/></li> <li><img src="img/TFEL-3.1/MINGW-Cast3M2017.png" width="620" height="320" alt="MingGW gcc 6.3 (delivered by Cast3M 2017)"/></li> <li><img src="img/TFEL-3.1/OpenSolaris-2017.png" width="620" height="320" alt="OpenSolaris 2017"/></li> <li><img src="img/TFEL-3.1/Haiku-51366.png" width="620" height="320" alt="Haiku révision 51366"/></li> </ul> <span class="arrow previous"></span> <span class="arrow next"></span></p>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="js/slideshow.js"></script>
<p>Portability is a convincing sign of software quality and maintainability:</p>
<ul>
<li>usage of functionalities specific to operating systems are well identified.</li>
<li>it demonstrates that the code is not dependant of the system libraries, such as the <code>C</code> or <code>C++</code> libraries.</li>
</ul>
<p><code>TFEL</code> has been tested successfully on a various flavours of <code>LinuX</code> and <code>BSD</code> systems (including <code>FreeBSD</code> and <code>OpenBSD</code>). The first ones are mostly built on <code>gcc</code>, <code>libstdc++</code> and the <code>glibc</code>. The second ones are built on <code>clang</code> and <code>libc++</code>.</p>
<p><code>TFEL</code> can be built on <code>Windows</code> in a wide variety of configurations and compilers:</p>
<ul>
<li>native ports can be built using the <code>Visual Studio</code> (2015 and 2017) or <code>MingGW</code> compilers.</li>
<li><code>TFEL</code> can be built in the <code>Cygwin</code> environment.</li>
</ul>
<p><code>TFEL</code> have reported to build successfully in the <code>Windows Subsystem for LinuX</code> (<code>WSL</code>) environment.</p>
<p>Although not officially supported, more exotic systems, such as <code>OpenSolaris</code> and <code>Haiku</code>, have also been tested successfully. The <code>Minix</code> operating systems provides a pre-release of <code>clang</code> <code>3.4</code> that fails to compile <code>TFEL</code>.</p>
<h2 id="supported-compilers"><span class="header-section-number">10.1</span> Supported compilers</h2>
<p>Version 3.1 has been tested using the following compilers:</p>
<ul>
<li><a href="https://gcc.gnu.org/"><code>gcc</code></a> on various <code>POSIX</code> systems: versions 4.7, 4.8, 4.9, 5.1, 5.2, 6.1, 6.2, 7.1, 7.2</li>
<li><a href="http://clang.llvm.org/"><code>clang</code></a> on various <code>POSIX</code> systems: versions 3.5, 3.6, 3.7, 3.8, 3.9, 4.0, 5.0</li>
<li><a href="https://software.intel.com/en-us/intel-compilers"><code>intel</code></a>. The only tested version is the 2018 version on <code>LinuX</code>. <a href="https://software.intel.com/en-us/intel-compilers">Intel compilers 15 and 16</a> are known not to work due to a bug in the <a href="https://www.edg.com">EDG</a> front-end that can’t parse a syntax mandatory for the expression template engine. The same bug affects the <a href="http://sourceforge.net/projects/blitz/">Blitz++</a> library (see <a href="http://dsec.pku.edu.cn/~mendl/blitz/manual/blitz11.html" class="uri">http://dsec.pku.edu.cn/~mendl/blitz/manual/blitz11.html</a>). Version 2017 shall work but were not tested.</li>
<li><a href="https://www.visualstudio.com/"><code>Visual Studio</code></a> The only supported versions are the 2015 and 2017 versions. Previous versions do not provide a suitable <code>C++11</code> support.</li>
<li><code>PGI</code> compiler (NVIDIA): version 17.10 on <code>LinuX</code></li>
<li><code>MinGW</code> has been tested successfully in a wide variety of configurations/versions, including the version delivered with <code>Cast3M 2017</code>.</li>
</ul>
<h2 id="benchmarcks"><span class="header-section-number">10.2</span> Benchmarcks</h2>
<table>
<caption>A comparison of various compilers and specific options</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Compiler and options</th>
<th style="text-align: center;">Success ratio</th>
<th style="text-align: center;">Test time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>gcc 4.9.2</code></td>
<td style="text-align: center;">100% tests passed</td>
<td style="text-align: center;">681.19 sec</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>gcc 4.9.2+fast-math</code></td>
<td style="text-align: center;">100% tests passed</td>
<td style="text-align: center;">572.48 sec</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>clang 3.5</code></td>
<td style="text-align: center;">100% tests passed</td>
<td style="text-align: center;">662.50 sec</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>clang 3.5+libstcxx</code></td>
<td style="text-align: center;">99% tests passed</td>
<td style="text-align: center;">572.18 sec</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>clang 5.0</code></td>
<td style="text-align: center;">100% tests passed</td>
<td style="text-align: center;">662.50 sec</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>icpc 2018</code></td>
<td style="text-align: center;">100% tests passed</td>
<td style="text-align: center;">511.08 sec</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>PGI 17.10</code></td>
<td style="text-align: center;">99% tests passed</td>
<td style="text-align: center;">662.61 sec</td>
</tr>
</tbody>
</table>
<p>Concerning the <code>PGI</code> compilers, performances may be affected by the fact that this compiler generates huge shared libraries (three to ten times larger than other compilers).</p>
<h1 id="references"><span class="header-section-number">11</span> References</h1>
<!-- Local IspellDict: english -->
<div id="refs" class="references">
<div id="ref-barlat_linear_2005">
<p>Barlat, F., H. Aretz, J. W. Yoon, M. E. Karabin, J. C. Brem, and R. E. Dick. 2005. “Linear Transfomation-Based Anisotropic Yield Functions.” <em>International Journal of Plasticity</em> 21 (5): 1009–39. <a href="https://doi.org/10.1016/j.ijplas.2004.06.004" class="uri">https://doi.org/10.1016/j.ijplas.2004.06.004</a>.</p>
</div>
<div id="ref-belytschko_nonlinear_2000">
<p>Belytschko, Ted. 2000. <em>Nonlinear Finite Elements for Continua and Structures</em>. Chichester ; New York: Wiley-Blackwell.</p>
</div>
<div id="ref-eberly_robust_2016">
<p>Eberly, David. 2016. “A Robust Eigensolver for 3 × 3 Symmetric Matrices.” <a href="https://www.geometrictools.com/Documentation/RobustEigenSymmetric3x3.pdf" class="uri">https://www.geometrictools.com/Documentation/RobustEigenSymmetric3x3.pdf</a>.</p>
</div>
<div id="ref-eberly_geometric_2017">
<p>———. 2017. “Geometric Tools.” 2017. <a href="http://www.geometrictools.com/" class="uri">http://www.geometrictools.com/</a>.</p>
</div>
<div id="ref-fevotte_verrou:_2016">
<p>Févotte, François, and Bruno Lathuilière. 2016. “VERROU: Assessing Floating-Point Accuracy Without Recompiling.” <a href="https://hal.archives-ouvertes.fr/hal-01383417/" class="uri">https://hal.archives-ouvertes.fr/hal-01383417/</a>.</p>
</div>
<div id="ref-hillerborg_analysis_1976">
<p>Hillerborg, A., M. Modéer, and P.-E. Perterson. 1976. “Analysis of Crack Formation and Crack Growth in Concrete by Means of Fracture Mechanics and Finite Elements.” <em>Cement and Concrete Research</em> 6: 779–82.</p>
</div>
<div id="ref-hosford_generalized_1972">
<p>Hosford, W. F. 1972. “A Generalized Isotropic Yield Criterion.” <em>Journal of Applied Mechanics</em> 39 (2): 607–9.</p>
</div>
<div id="ref-kopp_efficient_2008">
<p>Kopp, Joachim. 2008. “Efficient Numerical Diagonalization of Hermitian 3x3 Matrices.” <em>International Journal of Modern Physics C</em> 19 (3): 523–48. <a href="https://doi.org/10.1142/S0129183108012303" class="uri">https://doi.org/10.1142/S0129183108012303</a>.</p>
</div>
<div id="ref-kopp_numerical_2017">
<p>———. 2017. “Numerical Diagonalization of 3x3 Matrices.” 2017. <a href="https://www.mpi-hd.mpg.de/personalhomes/globes/3x3/" class="uri">https://www.mpi-hd.mpg.de/personalhomes/globes/3x3/</a>.</p>
</div>
<div id="ref-lamotte_cadna_c:_2010">
<p>Lamotte, J.-L., J.-M. Chesneaux, and F. Jézéquel. 2010. “CADNA_C: A Version of CADNA for Use with c or C++ Programs.” <em>Computer Physics Communications</em> 181 (11): 1925–6.</p>
</div>
<div id="ref-miehe_anisotropic_2002">
<p>Miehe, C., N. Apel, and M. Lambrecht. 2002. “Anisotropic Additive Plasticity in the Logarithmic Strain Space: Modular Kinematic Formulation and Implementation Based on Incremental Minimization Principles for Standard Materials.” <em>Computer Methods in Applied Mechanics and Engineering</em> 191 (47–48): 5383–5425. <a href="https://doi.org/10.1016/S0045-7825(02)00438-3" class="uri">https://doi.org/10.1016/S0045-7825(02)00438-3</a>.</p>
</div>
<div id="ref-musl_libc_2017">
<p>Musl development community. 2017. “Musl Libc.” 2017. <a href="https://www.musl-libc.org/" class="uri">https://www.musl-libc.org/</a>.</p>
</div>
<div id="ref-scherzinger_return_2017">
<p>Scherzinger, W. M. 2017. “A Return Mapping Algorithm for Isotropic and Anisotropic Plasticity Models Using a Line Search Method.” <em>Computer Methods in Applied Mechanics and Engineering</em> 317 (April): 526–53. <a href="https://doi.org/10.1016/j.cma.2016.11.026" class="uri">https://doi.org/10.1016/j.cma.2016.11.026</a>.</p>
</div>
<div id="ref-universite_pierre_et_marie_curie_cadna:_">
<p>Université Pierre et Marie Curie, France, Paris. 2017. “CADNA: Control of Accuracy and Debugging for Numerical Applications.” <a href="http://www.lip6.fr/cadna" class="uri">http://www.lip6.fr/cadna</a>.</p>
</div>
</div>
        <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-62273823-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
